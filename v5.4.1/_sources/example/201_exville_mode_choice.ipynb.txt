{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 201: Exampville Mode Choice\n",
    "\n",
    "Welcome to Exampville, the best simulated town in this here part of the internet!\n",
    "\n",
    "Exampville is a demonstration provided with Larch that walks through some of the \n",
    "data and tools that a transportation planner might use when building a travel model. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import larch, numpy, pandas, os\n",
    "from larch import P, X"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'5.4.0'"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "larch.__version__"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this example notebook, we will walk through the creation of a tour mode choice model."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To begin, we'll re-load the tours and skims data from the \n",
    "data setup example."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "hh, pp, tour, skims = larch.example(200, ['hh', 'pp', 'tour', 'skims'])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Preprocessing"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Exampville data output contains a set of files similar to what we might\n",
    "find for a real travel survey: network skims, and tables of households, persons,\n",
    "and tours.  We'll need to merge these tables to create a composite dataset\n",
    "for mode choice model estimation.\n",
    "\n",
    "We can merge data from other tables using the usual pandas syntax for merging.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "raw = tour.merge(hh, on='HHID').merge(pp, on=('HHID', 'PERSONID'))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Our zone numbering system starts with zone 1, as is common for many TAZ numbering \n",
    "systems seen in practice.  But, for looking up data in the skims matrix, we'll need\n",
    "to use zero-based numbering that is standard in Python.  So we'll create two new \n",
    "TAZ-index columns to assist this process."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "raw[\"HOMETAZi\"] = raw[\"HOMETAZ\"] - 1\n",
    "raw[\"DTAZi\"] = raw[\"DTAZ\"] - 1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Int64Index: 20739 entries, 0 to 20738\n",
      "Data columns (total 35 columns):\n",
      " #   Column         Non-Null Count  Dtype  \n",
      "---  ------         --------------  -----  \n",
      " 0   TOURID         20739 non-null  int64  \n",
      " 1   HHID           20739 non-null  int64  \n",
      " 2   PERSONID       20739 non-null  int64  \n",
      " 3   DTAZ           20739 non-null  int64  \n",
      " 4   TOURMODE       20739 non-null  int64  \n",
      " 5   TOURPURP       20739 non-null  int64  \n",
      " 6   N_STOPS        20739 non-null  int64  \n",
      " 7   N_TRIPS_x      20739 non-null  int64  \n",
      " 8   N_TRIPS_HBW_x  20739 non-null  int64  \n",
      " 9   N_TRIPS_HBO_x  20739 non-null  int64  \n",
      " 10  N_TRIPS_NHB_x  20739 non-null  int64  \n",
      " 11  X              20739 non-null  float64\n",
      " 12  Y              20739 non-null  float64\n",
      " 13  INCOME         20739 non-null  float64\n",
      " 14  N_VEHICLES     20739 non-null  int64  \n",
      " 15  HHSIZE         20739 non-null  int64  \n",
      " 16  geometry       20739 non-null  object \n",
      " 17  HOMETAZ        20739 non-null  int64  \n",
      " 18  N_TRIPS_y      20739 non-null  int64  \n",
      " 19  N_TRIPS_HBW_y  20739 non-null  int64  \n",
      " 20  N_TRIPS_HBO_y  20739 non-null  int64  \n",
      " 21  N_TRIPS_NHB_y  20739 non-null  int64  \n",
      " 22  N_WORKERS      20739 non-null  int64  \n",
      " 23  HHIDX          20739 non-null  int64  \n",
      " 24  AGE            20739 non-null  int64  \n",
      " 25  WORKS          20739 non-null  int64  \n",
      " 26  N_WORK_TOURS   20739 non-null  int64  \n",
      " 27  N_OTHER_TOURS  20739 non-null  int64  \n",
      " 28  N_TOURS        20739 non-null  int64  \n",
      " 29  N_TRIPS        20739 non-null  int64  \n",
      " 30  N_TRIPS_HBW    20739 non-null  int64  \n",
      " 31  N_TRIPS_HBO    20739 non-null  int64  \n",
      " 32  N_TRIPS_NHB    20739 non-null  int64  \n",
      " 33  HOMETAZi       20739 non-null  int64  \n",
      " 34  DTAZi          20739 non-null  int64  \n",
      "dtypes: float64(3), int64(31), object(1)\n",
      "memory usage: 5.7+ MB\n"
     ]
    }
   ],
   "source": [
    "raw.info()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In Exampville, there are only two kinds of trips: \n",
    "\n",
    "- work (purpose=1) and \n",
    "- non-work (purpose=2). \n",
    "\n",
    "We want to estimate a mode choice model for work trips, \n",
    "so we’ll begin by excluding all the other trips:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "raw = raw[raw.TOURPURP == 1]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Int64Index: 7564 entries, 0 to 20736\n",
      "Data columns (total 35 columns):\n",
      " #   Column         Non-Null Count  Dtype  \n",
      "---  ------         --------------  -----  \n",
      " 0   TOURID         7564 non-null   int64  \n",
      " 1   HHID           7564 non-null   int64  \n",
      " 2   PERSONID       7564 non-null   int64  \n",
      " 3   DTAZ           7564 non-null   int64  \n",
      " 4   TOURMODE       7564 non-null   int64  \n",
      " 5   TOURPURP       7564 non-null   int64  \n",
      " 6   N_STOPS        7564 non-null   int64  \n",
      " 7   N_TRIPS_x      7564 non-null   int64  \n",
      " 8   N_TRIPS_HBW_x  7564 non-null   int64  \n",
      " 9   N_TRIPS_HBO_x  7564 non-null   int64  \n",
      " 10  N_TRIPS_NHB_x  7564 non-null   int64  \n",
      " 11  X              7564 non-null   float64\n",
      " 12  Y              7564 non-null   float64\n",
      " 13  INCOME         7564 non-null   float64\n",
      " 14  N_VEHICLES     7564 non-null   int64  \n",
      " 15  HHSIZE         7564 non-null   int64  \n",
      " 16  geometry       7564 non-null   object \n",
      " 17  HOMETAZ        7564 non-null   int64  \n",
      " 18  N_TRIPS_y      7564 non-null   int64  \n",
      " 19  N_TRIPS_HBW_y  7564 non-null   int64  \n",
      " 20  N_TRIPS_HBO_y  7564 non-null   int64  \n",
      " 21  N_TRIPS_NHB_y  7564 non-null   int64  \n",
      " 22  N_WORKERS      7564 non-null   int64  \n",
      " 23  HHIDX          7564 non-null   int64  \n",
      " 24  AGE            7564 non-null   int64  \n",
      " 25  WORKS          7564 non-null   int64  \n",
      " 26  N_WORK_TOURS   7564 non-null   int64  \n",
      " 27  N_OTHER_TOURS  7564 non-null   int64  \n",
      " 28  N_TOURS        7564 non-null   int64  \n",
      " 29  N_TRIPS        7564 non-null   int64  \n",
      " 30  N_TRIPS_HBW    7564 non-null   int64  \n",
      " 31  N_TRIPS_HBO    7564 non-null   int64  \n",
      " 32  N_TRIPS_NHB    7564 non-null   int64  \n",
      " 33  HOMETAZi       7564 non-null   int64  \n",
      " 34  DTAZi          7564 non-null   int64  \n",
      "dtypes: float64(3), int64(31), object(1)\n",
      "memory usage: 2.1+ MB\n"
     ]
    }
   ],
   "source": [
    "raw.info()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<larch.OMX> ⋯/exampville_skims.omx\n",
       " |  shape:(40, 40)\n",
       " |  data:\n",
       " |    AUTO_COST    (float64)\n",
       " |    AUTO_DIST    (float64)\n",
       " |    AUTO_TIME    (float64)\n",
       " |    BIKE_TIME    (float64)\n",
       " |    TRANSIT_FARE (float64)\n",
       " |    TRANSIT_IVTT (float64)\n",
       " |    TRANSIT_OVTT (float64)\n",
       " |    WALK_DIST    (float64)\n",
       " |    WALK_TIME    (float64)\n",
       " |  lookup:\n",
       " |    TAZ_AREA_TYPE (40 |S3)\n",
       " |    TAZ_ID        (40 int64)"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "skims"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "For this tour mode choice model, we can pick values \n",
    "out of the skims for the known O-D of the tour, so \n",
    "that we have access to the level-of-service data for\n",
    "each possible mode serving that O-D pair.  We'll \n",
    "use the `get_rc_dataframe` method of the `larch.OMX`\n",
    "object, which lets us give the a list of the index for the \n",
    "production and attraction (row and column) value we\n",
    "want to use.  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "raw = raw.join(\n",
    "    skims.get_rc_dataframe(\n",
    "        raw.HOMETAZi, raw.DTAZi,\n",
    "    )\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can review the `raw` frame to see what variables are now included."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Int64Index: 7564 entries, 0 to 20736\n",
      "Data columns (total 44 columns):\n",
      " #   Column         Non-Null Count  Dtype  \n",
      "---  ------         --------------  -----  \n",
      " 0   TOURID         7564 non-null   int64  \n",
      " 1   HHID           7564 non-null   int64  \n",
      " 2   PERSONID       7564 non-null   int64  \n",
      " 3   DTAZ           7564 non-null   int64  \n",
      " 4   TOURMODE       7564 non-null   int64  \n",
      " 5   TOURPURP       7564 non-null   int64  \n",
      " 6   N_STOPS        7564 non-null   int64  \n",
      " 7   N_TRIPS_x      7564 non-null   int64  \n",
      " 8   N_TRIPS_HBW_x  7564 non-null   int64  \n",
      " 9   N_TRIPS_HBO_x  7564 non-null   int64  \n",
      " 10  N_TRIPS_NHB_x  7564 non-null   int64  \n",
      " 11  X              7564 non-null   float64\n",
      " 12  Y              7564 non-null   float64\n",
      " 13  INCOME         7564 non-null   float64\n",
      " 14  N_VEHICLES     7564 non-null   int64  \n",
      " 15  HHSIZE         7564 non-null   int64  \n",
      " 16  geometry       7564 non-null   object \n",
      " 17  HOMETAZ        7564 non-null   int64  \n",
      " 18  N_TRIPS_y      7564 non-null   int64  \n",
      " 19  N_TRIPS_HBW_y  7564 non-null   int64  \n",
      " 20  N_TRIPS_HBO_y  7564 non-null   int64  \n",
      " 21  N_TRIPS_NHB_y  7564 non-null   int64  \n",
      " 22  N_WORKERS      7564 non-null   int64  \n",
      " 23  HHIDX          7564 non-null   int64  \n",
      " 24  AGE            7564 non-null   int64  \n",
      " 25  WORKS          7564 non-null   int64  \n",
      " 26  N_WORK_TOURS   7564 non-null   int64  \n",
      " 27  N_OTHER_TOURS  7564 non-null   int64  \n",
      " 28  N_TOURS        7564 non-null   int64  \n",
      " 29  N_TRIPS        7564 non-null   int64  \n",
      " 30  N_TRIPS_HBW    7564 non-null   int64  \n",
      " 31  N_TRIPS_HBO    7564 non-null   int64  \n",
      " 32  N_TRIPS_NHB    7564 non-null   int64  \n",
      " 33  HOMETAZi       7564 non-null   int64  \n",
      " 34  DTAZi          7564 non-null   int64  \n",
      " 35  AUTO_COST      7564 non-null   float64\n",
      " 36  AUTO_DIST      7564 non-null   float64\n",
      " 37  AUTO_TIME      7564 non-null   float64\n",
      " 38  BIKE_TIME      7564 non-null   float64\n",
      " 39  TRANSIT_FARE   7564 non-null   float64\n",
      " 40  TRANSIT_IVTT   7564 non-null   float64\n",
      " 41  TRANSIT_OVTT   7564 non-null   float64\n",
      " 42  WALK_DIST      7564 non-null   float64\n",
      " 43  WALK_TIME      7564 non-null   float64\n",
      "dtypes: float64(12), int64(31), object(1)\n",
      "memory usage: 2.9+ MB\n"
     ]
    }
   ],
   "source": [
    "raw.info()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now we can assemble this data, along with the definitions of the alternatives,\n",
    "into a `larch.DataFrames` object.  This object links information about the \n",
    "raw data and the choices into one data structure.  It can handle multiple data\n",
    "formats (including `idco` and `idca` data simultanously), but here we'll only\n",
    "be using a single `idco` format data table."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "# For clarity, we can define numbers as names for modes\n",
    "DA = 1\n",
    "SR = 2\n",
    "Walk = 3\n",
    "Bike = 4\n",
    "Transit = 5"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "dfs = larch.DataFrames(\n",
    "    co=raw, \n",
    "    alt_codes=[DA,SR,Walk,Bike,Transit], \n",
    "    alt_names=['DA','SR','Walk','Bike','Transit'],\n",
    "    ch_name='TOURMODE',\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Model Definition"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "And then we are ready to create our model."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [],
   "source": [
    "m = larch.Model(dataservice=dfs)\n",
    "m.title = \"Exampville Work Tour Mode Choice v1\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We will explicitly define the set of utility functions \n",
    "we want to use.  Because the DataFrames we are using to \n",
    "serve data to this model contains exclusively `idco` format\n",
    "data, we'll use only the `utility_co` mapping to define\n",
    "a unique utility function for each alternative."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "m.utility_co[DA] = (\n",
    "        + P.InVehTime * X.AUTO_TIME\n",
    "        + P.Cost * X.AUTO_COST # dollars per mile\n",
    ")\n",
    "\n",
    "m.utility_co[SR] = (\n",
    "        + P.ASC_SR\n",
    "        + P.InVehTime * X.AUTO_TIME\n",
    "        + P.Cost * (X.AUTO_COST * 0.5) # dollars per mile, half share\n",
    "        + P(\"LogIncome:SR\") * X(\"log(INCOME)\")\n",
    ")\n",
    "\n",
    "m.utility_co[Walk] = (\n",
    "        + P.ASC_Walk\n",
    "        + P.NonMotorTime * X.WALK_TIME\n",
    "        + P(\"LogIncome:Walk\") * X(\"log(INCOME)\")\n",
    ")\n",
    "\n",
    "m.utility_co[Bike] = (\n",
    "        + P.ASC_Bike\n",
    "        + P.NonMotorTime * X.BIKE_TIME\n",
    "        + P(\"LogIncome:Bike\") * X(\"log(INCOME)\")\n",
    ")\n",
    "\n",
    "m.utility_co[Transit] = (\n",
    "        + P.ASC_Transit\n",
    "        + P.InVehTime * X.TRANSIT_IVTT\n",
    "        + P.OutVehTime * X.TRANSIT_OVTT\n",
    "        + P.Cost * X.TRANSIT_FARE\n",
    "        + P(\"LogIncome:Transit\") * X('log(INCOME)')\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To write a nested logit mode, we'll attach some nesting nodes to the \n",
    "model's `graph`.  Each `new_node` allows us to define the set of \n",
    "codes for the child nodes (elemental alternatives, or lower level nests)\n",
    "as well as giving the new nest a name and assigning a logsum parameter.\n",
    "The return value of this method is the node code for the newly created \n",
    "nest, which then can potenially be used as a child code when creating\n",
    "a higher level nest.  We do this below, adding the 'Car' nest into the \n",
    "'Motor' nest."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [],
   "source": [
    "Car = m.graph.new_node(parameter='Mu:Car', children=[DA,SR], name='Car')\n",
    "NonMotor = m.graph.new_node(parameter='Mu:NonMotor', children=[Walk,Bike], name='NonMotor')\n",
    "Motor = m.graph.new_node(parameter='Mu:Motor', children=[Car,Transit], name='Motor')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Let's visually check on the nesting structure."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div xmlns=\"http://www.w3.org/2000/svg\"><svg height=\"276pt\" viewBox=\"0.00 0.00 461.00 276.00\" width=\"461pt\">\n",
       "<g class=\"graph\" id=\"graph0\" transform=\"scale(1 1) rotate(0) translate(4 272)\">\n",
       "<title>%3</title>\n",
       "<polygon fill=\"white\" points=\"-4,4 -4,-272 457,-272 457,4 -4,4\" stroke=\"transparent\"></polygon>\n",
       "<g class=\"cluster\" id=\"clust1\">\n",
       "<title>cluster_elemental</title>\n",
       "<path d=\"M20,-8C20,-8 433,-8 433,-8 439,-8 445,-14 445,-20 445,-20 445,-48 445,-48 445,-54 439,-60 433,-60 433,-60 20,-60 20,-60 14,-60 8,-54 8,-48 8,-48 8,-20 8,-20 8,-14 14,-8 20,-8\" fill=\"lightgrey\" stroke=\"white\"></path>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node1\">\n",
       "<title>0</title>\n",
       "<polygon fill=\"none\" points=\"162,-244.44 189,-232 216,-244.44 215.97,-264.56 162.03,-264.56 162,-244.44\" stroke=\"black\"></polygon>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"middle\" x=\"189\" y=\"-245.8\">0</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node8\">\n",
       "<title>7</title>\n",
       "<path d=\"M171.85,-124C171.85,-124 108.15,-124 108.15,-124 102.15,-124 96.15,-118 96.15,-112 96.15,-112 96.15,-100 96.15,-100 96.15,-94 102.15,-88 108.15,-88 108.15,-88 171.85,-88 171.85,-88 177.85,-88 183.85,-94 183.85,-100 183.85,-100 183.85,-112 183.85,-112 183.85,-118 177.85,-124 171.85,-124\" fill=\"none\" stroke=\"black\"></path>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"104.07\" y=\"-107.3\">(7) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"116.82\" y=\"-107.3\">NonMotor</text>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" font-style=\"italic\" text-anchor=\"start\" x=\"113.5\" y=\"-97.3\">Mu:NonMotor</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge1\">\n",
       "<title>0-&gt;7</title>\n",
       "<path d=\"M183.85,-234.07C175.67,-210.38 159.6,-163.81 149.35,-134.1\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"152.56,-132.68 145.99,-124.37 145.95,-134.96 152.56,-132.68\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node9\">\n",
       "<title>8</title>\n",
       "<path d=\"M257.74,-196C257.74,-196 218.26,-196 218.26,-196 212.26,-196 206.26,-190 206.26,-184 206.26,-184 206.26,-172 206.26,-172 206.26,-166 212.26,-160 218.26,-160 218.26,-160 257.74,-160 257.74,-160 263.74,-160 269.74,-166 269.74,-172 269.74,-172 269.74,-184 269.74,-184 269.74,-190 263.74,-196 257.74,-196\" fill=\"none\" stroke=\"black\"></path>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"214.13\" y=\"-179.3\">(8) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"226.87\" y=\"-179.3\">Motor</text>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" font-style=\"italic\" text-anchor=\"start\" x=\"219.25\" y=\"-169.3\">Mu:Motor</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge2\">\n",
       "<title>0-&gt;8</title>\n",
       "<path d=\"M198.22,-235.83C204.43,-226.96 212.82,-214.96 220.3,-204.28\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"223.18,-206.28 226.04,-196.08 217.44,-202.27 223.18,-206.28\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node2\">\n",
       "<title>1</title>\n",
       "<ellipse cx=\"330\" cy=\"-34\" fill=\"white\" rx=\"30.86\" ry=\"18\" stroke=\"black\"></ellipse>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"313.52\" y=\"-30.8\">(1) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"326.26\" y=\"-30.8\">DA</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node3\">\n",
       "<title>2</title>\n",
       "<ellipse cx=\"408\" cy=\"-34\" fill=\"white\" rx=\"28.95\" ry=\"18\" stroke=\"black\"></ellipse>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"393.07\" y=\"-30.8\">(2) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"405.81\" y=\"-30.8\">SR</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node4\">\n",
       "<title>3</title>\n",
       "<ellipse cx=\"140\" cy=\"-34\" fill=\"white\" rx=\"36.71\" ry=\"18\" stroke=\"black\"></ellipse>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"119.03\" y=\"-30.8\">(3) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"131.77\" y=\"-30.8\">Walk</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node5\">\n",
       "<title>4</title>\n",
       "<ellipse cx=\"51\" cy=\"-34\" fill=\"white\" rx=\"34.72\" ry=\"18\" stroke=\"black\"></ellipse>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"31.41\" y=\"-30.8\">(4) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"44.15\" y=\"-30.8\">Bike</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node6\">\n",
       "<title>5</title>\n",
       "<ellipse cx=\"238\" cy=\"-34\" fill=\"white\" rx=\"42.8\" ry=\"18\" stroke=\"black\"></ellipse>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"212.04\" y=\"-30.8\">(5) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"224.79\" y=\"-30.8\">Transit</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"node\" id=\"node7\">\n",
       "<title>6</title>\n",
       "<path d=\"M345,-124C345,-124 315,-124 315,-124 309,-124 303,-118 303,-112 303,-112 303,-100 303,-100 303,-94 309,-88 315,-88 315,-88 345,-88 345,-88 351,-88 357,-94 357,-100 357,-100 357,-112 357,-112 357,-118 351,-124 345,-124\" fill=\"none\" stroke=\"black\"></path>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" text-anchor=\"start\" x=\"313.52\" y=\"-107.3\">(6) </text>\n",
       "<text font-family=\"Times,serif\" font-size=\"14.00\" text-anchor=\"start\" x=\"326.27\" y=\"-107.3\">Car</text>\n",
       "<text fill=\"#999999\" font-family=\"Times,serif\" font-size=\"9.00\" font-style=\"italic\" text-anchor=\"start\" x=\"316\" y=\"-97.3\">Mu:Car</text>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge3\">\n",
       "<title>6-&gt;1</title>\n",
       "<path d=\"M330,-87.7C330,-79.98 330,-70.71 330,-62.11\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"333.5,-62.1 330,-52.1 326.5,-62.1 333.5,-62.1\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge4\">\n",
       "<title>6-&gt;2</title>\n",
       "<path d=\"M349.28,-87.7C359.88,-78.18 373.12,-66.3 384.34,-56.23\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"386.98,-58.56 392.09,-49.28 382.31,-53.35 386.98,-58.56\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge5\">\n",
       "<title>7-&gt;3</title>\n",
       "<path d=\"M140,-87.7C140,-79.98 140,-70.71 140,-62.11\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"143.5,-62.1 140,-52.1 136.5,-62.1 143.5,-62.1\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge6\">\n",
       "<title>7-&gt;4</title>\n",
       "<path d=\"M118,-87.7C105.75,-78.07 90.42,-66.01 77.52,-55.86\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"79.47,-52.94 69.45,-49.51 75.14,-58.44 79.47,-52.94\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge8\">\n",
       "<title>8-&gt;5</title>\n",
       "<path d=\"M238,-159.87C238,-135.67 238,-91.21 238,-62.39\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"241.5,-62.19 238,-52.19 234.5,-62.19 241.5,-62.19\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "\n",
       "<g class=\"edge\" id=\"edge7\">\n",
       "<title>8-&gt;6</title>\n",
       "<path d=\"M260.74,-159.7C272.44,-150.8 286.86,-139.82 299.51,-130.2\" fill=\"none\" stroke=\"black\"></path>\n",
       "<polygon fill=\"black\" points=\"301.68,-132.94 307.52,-124.1 297.44,-127.37 301.68,-132.94\" stroke=\"black\"></polygon>\n",
       "</g>\n",
       "</g>\n",
       "</svg></div>"
      ],
      "text/plain": [
       "<larch.model.tree.NestingTree at 0x7fc190a81f90>"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "m.graph"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The tour mode choice model's choice variable is indicated by \n",
    "the code value in 'TOURMODE', and this can be \n",
    "defined for the model using `choice_co_code`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [],
   "source": [
    "m.choice_co_code = 'TOURMODE'"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can also give a dictionary of availability conditions based \n",
    "on values in the `idco` data, using the `availability_co_vars`\n",
    "attribute.  Alternatives that are always available can be indicated\n",
    "by setting the criterion to 1."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "m.availability_co_vars = {\n",
    "    DA: 'AGE >= 16',\n",
    "    SR: 1,\n",
    "    Walk: 'WALK_TIME < 60',\n",
    "    Bike: 'BIKE_TIME < 60',\n",
    "    Transit: 'TRANSIT_FARE>0',\n",
    "}"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Then let's prepare this data for estimation.  Even though the\n",
    "data is already in memory, the `load_data` method is used to \n",
    "pre-process the data, extracting the required values, pre-computing \n",
    "the values of fixed expressions, and assembling the results into\n",
    "contiguous arrays suitable for computing the log likelihood values\n",
    "efficiently."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Model Estimation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [],
   "source": [
    "m.load_data()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can check on some important statistics of this loaded data even\n",
    "before we estimate the model."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>chosen</th>\n",
       "      <th>available</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>DA</td>\n",
       "      <td>6052.0</td>\n",
       "      <td>7564</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>SR</td>\n",
       "      <td>810.0</td>\n",
       "      <td>7564</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Walk</td>\n",
       "      <td>196.0</td>\n",
       "      <td>4179</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Bike</td>\n",
       "      <td>72.0</td>\n",
       "      <td>7564</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Transit</td>\n",
       "      <td>434.0</td>\n",
       "      <td>4199</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>&lt; Total All Alternatives &gt;</th>\n",
       "      <td></td>\n",
       "      <td>7564.0</td>\n",
       "      <td></td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                               name  chosen available\n",
       "1                                DA  6052.0      7564\n",
       "2                                SR   810.0      7564\n",
       "3                              Walk   196.0      4179\n",
       "4                              Bike    72.0      7564\n",
       "5                           Transit   434.0      4199\n",
       "< Total All Alternatives >           7564.0          "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "m.dataframes.choice_avail_summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div xmlns=\"http://www.w3.org/2000/svg\"><table class=\"dataframe larch_dataframe\"><thead><th></th><th>n</th><th>minimum</th><th>maximum</th><th>median</th><th>histogram</th><th>mean</th><th>stdev</th><th>zeros</th><th>positives</th><th>negatives</th><th>nonzero_minimum</th><th>nonzero_maximum</th><th>nonzero_mean</th><th>nonzero_stdev</th></thead><tbody><tr><th>AUTO_COST</th><td>7564</td><td>0.194926</td><td>4.30796</td><td>1.00945</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2gMBgAAAAAAAAYFAAAAAAAArwUAAAAAAABzAwAAAAAAANwCAAAAAAAATgIAAAAAAADJAQAAAAAAALcAAAAAAAAAFQEAAAAAAABhAAAAAAAAACAAAAAAAAAAFQAAAAAAAAADAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcCfSia1S88g/iwubY61c4D+MotMbhnzqP8YcBmovTvI/R2gixhte9z/Hsz4iCG78P6R/LT/6vgBAZKU7bfBGA0Aky0mb5s4FQOTwV8ncVghApBZm99LeCkBlPHQlyWYNQCViglO/7g9A80PIwFo7EUCUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 0.979592  L 3.272727 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 4.295523  L 8.307692 4.295523  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 2.156621  L 13.342657 2.156621  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 9.395982  L 18.377622 9.395982  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 11.307072  L 23.412587 11.307072  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 13.104256  L 28.447552 13.104256  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 14.787534  L 33.482517 14.787534  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 18.255339  L 38.517483 18.255339  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 17.065654  L 43.552448 17.065654  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 19.343775  L 48.587413 19.343775  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 20.166429  L 53.622378 20.166429  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 20.305648  L 58.657343 20.305648  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#p1eb6f0a9e8)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.53346  L 63.692308 20.53346  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"p1eb6f0a9e8\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>1.20601</td><td>0.754844</td><td>0</td><td>7564</td><td>0</td><td>0.194926</td><td>4.30796</td><td>1.20601</td><td>0.754844</td></tr><tr><th>AUTO_TIME</th><td>7564</td><td>0.930008</td><td>29.4415</td><td>7.61571</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2gxAwAAAAAAAKoFAAAAAAAAgwUAAAAAAAD3BQAAAAAAAGADAAAAAAAAagIAAAAAAABfAQAAAAAAACMBAAAAAAAAmwAAAAAAAAAyAAAAAAAAABYAAAAAAAAABgAAAAAAAAACAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcAjW8M2gwu0/O5faV1H8CEB6fBw+/UMVQFetS9DRCR5AGm89MdNnI0CIB1V6vconQPafbMOnLSxAMhxCBklIMEBp6M0qvnkyQKC0WU8zqzRA14Dlc6jcNkAOTXGYHQ45QEYZ/bySPztAfOWI4QdxPUCUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 10.08909  L 3.272727 10.08909  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 1.967523  L 8.307692 1.967523  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 2.467904  L 13.342657 2.467904  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 0.979592  L 18.377622 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 9.486067  L 23.412587 9.486067  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 12.642316  L 28.447552 12.642316  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 16.068  L 33.482517 16.068  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 16.837817  L 38.517483 16.837817  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 18.582735  L 43.552448 18.582735  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 19.929915  L 48.587413 19.929915  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 20.289162  L 53.622378 20.289162  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 20.494447  L 58.657343 20.494447  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#paebb05e303)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.545768  L 63.692308 20.545768  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"paebb05e303\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>8.22287</td><td>4.58134</td><td>0</td><td>7564</td><td>0</td><td>0.930008</td><td>29.4415</td><td>8.22287</td><td>4.58134</td></tr><tr><th>BIKE_TIME</th><td>7564</td><td>2.78465</td><td>52.2321</td><td>13.5864</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2gbBAAAAAAAAJwFAAAAAAAAxgUAAAAAAABsAwAAAAAAAGoDAAAAAAAARwIAAAAAAAAQAgAAAAAAAEIBAAAAAAAAwwAAAAAAAAB/AAAAAAAAAD0AAAAAAAAAIAAAAAAAAAABAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcMjEqIj3RgZAPICxxGpaGkAKT4firMgkQPXdtWIkZCxAcDZy8c3/MUDmfYmxic01QFzFoHFFmzlA0gy4MQFpPUAkqud4XptAQN5N81g8gkJAmvH+OBppREBUlQoZ+E9GQBA5FvnVNkhAytwh2bMdSkCUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 6.63975  L 3.272727 6.63975  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 1.536329  L 8.307692 1.536329  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 0.979592  L 13.342657 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 8.959487  L 18.377622 8.959487  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 8.985999  L 23.412587 8.985999  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 12.84339  L 28.447552 12.84339  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 13.57245  L 33.482517 13.57245  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 16.303112  L 38.517483 16.303112  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 17.986579  L 43.552448 17.986579  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 18.887962  L 48.587413 18.887962  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 19.762834  L 53.622378 19.762834  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 20.147248  L 58.657343 20.147248  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#pa4d7c9e55d)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.558173  L 63.692308 20.558173  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"pa4d7c9e55d\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>15.9827</td><td>9.29732</td><td>0</td><td>7564</td><td>0</td><td>2.78465</td><td>52.2321</td><td>15.9827</td><td>9.29732</td></tr><tr><th>TRANSIT_FARE</th><td>7564</td><td>0</td><td>2.5</td><td>2.5</td><td><div class=\"figure\" metadata=\"gASVGQEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLAoWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQxAlDQAAAAAAAGcQAAAAAAAAlHSUYowJYmluX2VkZ2VzlGgEaAdLAIWUaAmHlFKUKEsBSwOFlGgRiUMYAAAAAAAAAAABAAAAAAAAAAIAAAAAAAAAlHSUYowRemVyb3NfYXJlX2Ryb3BwZWSUiYwScmFuZ2VfaXNfdHJ1bmNhdGVklIl1Lg==\" range_is_truncated=\"False\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title>Histograms are purple if the data is represented as discrete values.</title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#p52566831be)\" d=\"M 3.272727 20.571429  L 32.363636 20.571429  L 32.363636 4.870897  L 3.272727 4.870897  z \" style=\"fill:#6478ba;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#p52566831be)\" d=\"M 39.636364 20.571429  L 68.727273 20.571429  L 68.727273 0.979592  L 39.636364 0.979592  z \" style=\"fill:#6478ba;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"p52566831be\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>1.38782</td><td>1.24238</td><td>3365</td><td>4199</td><td>0</td><td>2.5</td><td>2.5</td><td>2.5</td><td>0</td></tr><tr><th>TRANSIT_IVTT</th><td>7564</td><td>0</td><td>12.1668</td><td>1.44769</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2jpAwAAAAAAAEsBAAAAAAAAsAIAAAAAAAAQAQAAAAAAADkBAAAAAAAAnQEAAAAAAACTAAAAAAAAACABAAAAAAAAPgAAAAAAAAC/AAAAAAAAAE4AAAAAAAAAswAAAAAAAADsAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcO3qD0LDsu4/niMQ8Jok/T/iKIwf6ncFQPU/EMeGXQxAhStKt5GhEUAPNwwLYBQVQJhCzl4uhxhAIk6Qsvz5G0CsWVIGy2wfQJsyCq3MbyFAYDjr1jMpI0AlPswAm+IkQOlDrSoCnCZArkmOVGlVKECUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSIjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"True\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title>Histograms are orange if the zeros are numerous and have been excluded.</title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 0.979592  L 3.272727 0.979592  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 14.093009  L 8.307692 14.093009  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 7.105711  L 13.342657 7.105711  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 15.247773  L 18.377622 15.247773  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 14.44531  L 23.412587 14.44531  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 12.488083  L 28.447552 12.488083  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 17.694306  L 33.482517 17.694306  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 14.934616  L 38.517483 14.934616  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 19.357948  L 43.552448 19.357948  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 16.833126  L 48.587413 16.833126  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 19.044792  L 53.622378 19.044792  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 17.067993  L 58.657343 17.067993  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#p02a8d6e1e8)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 15.952374  L 63.692308 15.952374  z \" style=\"fill:#f69300;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"p02a8d6e1e8\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>2.62277</td><td>3.38088</td><td>3365</td><td>4199</td><td>0</td><td>0.959322</td><td>12.1668</td><td>4.72461</td><td>3.26497</td></tr><tr><th>TRANSIT_OVTT</th><td>7564</td><td>0.759059</td><td>128.652</td><td>37.0499</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2jTAwAAAAAAAC0DAAAAAAAANQUAAAAAAAD9AwAAAAAAAHUEAAAAAAAA8gMAAAAAAAA4AgAAAAAAAGwBAAAAAAAAuAAAAAAAAAB1AAAAAAAAAA8AAAAAAAAADAAAAAAAAAAHAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcJTvdic2Sug/UsQcwaMxJUDWDOEPUm80QIO3Mz/SRT5AFzFDNykOREBthuxOaflIQMTblWap5E1AjZgfv/RnUUA4Q/TKlN1TQOPtyNY0U1ZAjpid4tTIWEA5Q3LudD5bQOXtRvoUtF1ASMwNg9oUYECUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 6.182525  L 3.272727 6.182525  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 8.622319  L 8.307692 8.622319  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 0.979592  L 13.342657 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 5.565228  L 18.377622 5.565228  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 3.801522  L 23.412587 3.801522  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 5.726901  L 28.447552 5.726901  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 12.223219  L 33.482517 12.223219  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 15.22152  L 38.517483 15.22152  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 17.867079  L 43.552448 17.867079  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 18.851815  L 48.587413 18.851815  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 20.350965  L 53.622378 20.350965  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 20.395058  L 58.657343 20.395058  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#p3fc73c5fc1)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.468546  L 63.692308 20.468546  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"p3fc73c5fc1\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>37.6614</td><td>23.2194</td><td>0</td><td>7564</td><td>0</td><td>0.759059</td><td>128.652</td><td>37.6614</td><td>23.2194</td></tr><tr><th>WALK_TIME</th><td>7564</td><td>11.1386</td><td>208.928</td><td>54.3454</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2gbBAAAAAAAAJwFAAAAAAAAxgUAAAAAAABsAwAAAAAAAGoDAAAAAAAARwIAAAAAAAAQAgAAAAAAAEIBAAAAAAAAwwAAAAAAAAB/AAAAAAAAAD0AAAAAAAAAIAAAAAAAAAABAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcMjEqIj3RiZAPICxxGpaOkAKT4firMhEQPXdtWIkZExAcDZy8c3/UUDmfYmxic1VQFzFoHFFm1lA0gy4MQFpXUAkqud4XptgQN5N81g8gmJAmvH+OBppZEBUlQoZ+E9mQBA5FvnVNmhAytwh2bMdakCUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 6.63975  L 3.272727 6.63975  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 1.536329  L 8.307692 1.536329  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 0.979592  L 13.342657 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 8.959487  L 18.377622 8.959487  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 8.985999  L 23.412587 8.985999  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 12.84339  L 28.447552 12.84339  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 13.57245  L 33.482517 13.57245  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 16.303112  L 38.517483 16.303112  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 17.986579  L 43.552448 17.986579  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 18.887962  L 48.587413 18.887962  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 19.762834  L 53.622378 19.762834  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 20.147248  L 58.657343 20.147248  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#pba9f3fe7ce)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.558173  L 63.692308 20.558173  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"pba9f3fe7ce\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>63.9308</td><td>37.1893</td><td>0</td><td>7564</td><td>0</td><td>11.1386</td><td>208.928</td><td>63.9308</td><td>37.1893</td></tr><tr><th>log(INCOME)</th><td>7564</td><td>7.59035</td><td>14.2181</td><td>10.6719</td><td><div class=\"figure\" metadata=\"gASV7gEAAAAAAAB9lCiMC2Jpbl9oZWlnaHRzlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLDYWUaAWMBWR0eXBllJOUjAJpOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ2gFAAAAAAAAABAAAAAAAAAANQAAAAAAAADiAAAAAAAAAPsJAAAAAAAAWwMAAAAAAAAeBAAAAAAAAEkEAAAAAAAAMAMAAAAAAAAFAgAAAAAAANcAAAAAAAAAdAAAAAAAAAAjAAAAAAAAAJR0lGKMCWJpbl9lZGdlc5RoBGgHSwCFlGgJh5RSlChLAUsOhZRoDowCZjiUSwBLAYeUUpQoSwNoEk5OTkr/////Sv////9LAHSUYolDcESg4uiDXB5AquEki0kzIEAzc9ghUTghQLsEjLhYPSJAQ5Y/T2BCI0DMJ/PlZ0ckQFS5pnxvTCVA3EpaE3dRJkBk3A2qflYnQO1twUCGWyhAdf90141gKUD+kChulWUqQIYi3ASdaitADrSPm6RvLECUdJRijBF6ZXJvc19hcmVfZHJvcHBlZJSJjBJyYW5nZV9pc190cnVuY2F0ZWSUSwB1Lg==\" range_is_truncated=\"0\" style=\"min-width:Truein\" zeros_are_dropped=\"False\"><svg height=\"20.571429pt\" version=\"1.1\" viewBox=\"0 0 72 20.571429\" width=\"72pt\">\n",
       " <defs>\n",
       "  <style type=\"text/css\">\n",
       "*{stroke-linecap:butt;stroke-linejoin:round;}\n",
       "  </style>\n",
       " </defs>\n",
       " <g id=\"figure_1\">\n",
       "  <title></title><g id=\"patch_1\">\n",
       "   <path d=\"M 0 20.571429  L 72 20.571429  L 72 0  L 0 0  z \" style=\"fill:none;\"></path>\n",
       "  </g>\n",
       "  <g id=\"axes_1\">\n",
       "   <g id=\"patch_2\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 3.272727 20.571429  L 8.307692 20.571429  L 8.307692 20.533088  L 3.272727 20.533088  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_3\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 8.307692 20.571429  L 13.342657 20.571429  L 13.342657 20.44874  L 8.307692 20.44874  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_4\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 13.342657 20.571429  L 18.377622 20.571429  L 18.377622 20.165023  L 13.342657 20.165023  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_5\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 18.377622 20.571429  L 23.412587 20.571429  L 23.412587 18.838452  L 18.377622 18.838452  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_6\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 23.412587 20.571429  L 28.447552 20.571429  L 28.447552 0.979592  L 23.412587 0.979592  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_7\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 28.447552 20.571429  L 33.482517 20.571429  L 33.482517 13.984584  L 28.447552 13.984584  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_8\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 33.482517 20.571429  L 38.517483 20.571429  L 38.517483 12.489317  L 33.482517 12.489317  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_9\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 38.517483 20.571429  L 43.552448 20.571429  L 43.552448 12.159591  L 38.517483 12.159591  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_10\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 43.552448 20.571429  L 48.587413 20.571429  L 48.587413 14.31431  L 43.552448 14.31431  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_11\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 48.587413 20.571429  L 53.622378 20.571429  L 53.622378 16.607053  L 48.587413 16.607053  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_12\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 53.622378 20.571429  L 58.657343 20.571429  L 58.657343 18.9228  L 53.622378 18.9228  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_13\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 58.657343 20.571429  L 63.692308 20.571429  L 63.692308 19.681936  L 58.657343 19.681936  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"patch_14\">\n",
       "    <path clip-path=\"url(#p1bce5d620e)\" d=\"M 63.692308 20.571429  L 68.727273 20.571429  L 68.727273 20.303047  L 63.692308 20.303047  z \" style=\"fill:#1d8bcc;\"></path>\n",
       "   </g>\n",
       "   <g id=\"matplotlib.axis_1\"></g>\n",
       "   <g id=\"matplotlib.axis_2\"></g>\n",
       "  </g>\n",
       " </g>\n",
       " <defs>\n",
       "  <clipPath id=\"p1bce5d620e\">\n",
       "   <rect height=\"20.571429\" width=\"72\" x=\"0\" y=\"-0\"></rect>\n",
       "  </clipPath>\n",
       " </defs>\n",
       "</svg></div></td><td>10.8414</td><td>1.01301</td><td>0</td><td>7564</td><td>0</td><td>7.59035</td><td>14.2181</td><td>10.8414</td><td>1.01301</td></tr></tbody></table></div>"
      ],
      "text/plain": [
       "                 n    minimum     maximum     median  \\\n",
       "AUTO_COST     7564   0.194926    4.307963   1.009448   \n",
       "AUTO_TIME     7564   0.930008   29.441527   7.615709   \n",
       "BIKE_TIME     7564   2.784652   52.232051  13.586354   \n",
       "TRANSIT_FARE  7564   0.000000    2.500000   2.500000   \n",
       "TRANSIT_IVTT  7564   0.000000   12.166819   1.447685   \n",
       "TRANSIT_OVTT  7564   0.759059  128.651674  37.049942   \n",
       "WALK_TIME     7564  11.138607  208.928204  54.345418   \n",
       "log(INCOME)   7564   7.590347   14.218053  10.671870   \n",
       "\n",
       "                                                      histogram       mean  \\\n",
       "AUTO_COST     [[[<Element '{http://www.w3.org/2000/svg}style...   1.206009   \n",
       "AUTO_TIME     [[[<Element '{http://www.w3.org/2000/svg}style...   8.222874   \n",
       "BIKE_TIME     [[[<Element '{http://www.w3.org/2000/svg}style...  15.982692   \n",
       "TRANSIT_FARE  [[[<Element '{http://www.w3.org/2000/svg}style...   1.387824   \n",
       "TRANSIT_IVTT  [[[<Element '{http://www.w3.org/2000/svg}style...   2.622771   \n",
       "TRANSIT_OVTT  [[[<Element '{http://www.w3.org/2000/svg}style...  37.661443   \n",
       "WALK_TIME     [[[<Element '{http://www.w3.org/2000/svg}style...  63.930768   \n",
       "log(INCOME)   [[[<Element '{http://www.w3.org/2000/svg}style...  10.841356   \n",
       "\n",
       "                  stdev  zeros  positives  negatives  nonzero_minimum  \\\n",
       "AUTO_COST      0.754844      0       7564          0         0.194926   \n",
       "AUTO_TIME      4.581342      0       7564          0         0.930008   \n",
       "BIKE_TIME      9.297318      0       7564          0         2.784652   \n",
       "TRANSIT_FARE   1.242379   3365       4199          0         2.500000   \n",
       "TRANSIT_IVTT   3.380879   3365       4199          0         0.959322   \n",
       "TRANSIT_OVTT  23.219383      0       7564          0         0.759059   \n",
       "WALK_TIME     37.189270      0       7564          0        11.138607   \n",
       "log(INCOME)    1.013010      0       7564          0         7.590347   \n",
       "\n",
       "              nonzero_maximum  nonzero_mean  nonzero_stdev  \n",
       "AUTO_COST            4.307963      1.206009       0.754844  \n",
       "AUTO_TIME           29.441527      8.222874       4.581342  \n",
       "BIKE_TIME           52.232051     15.982692       9.297318  \n",
       "TRANSIT_FARE         2.500000      2.500000       0.000000  \n",
       "TRANSIT_IVTT        12.166819      4.724610       3.264970  \n",
       "TRANSIT_OVTT       128.651674     37.661443      23.219383  \n",
       "WALK_TIME          208.928204     63.930768      37.189270  \n",
       "log(INCOME)         14.218053     10.841356       1.013010  "
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "m.dataframes.data_co.statistics()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "If we are satisfied with the statistics we see above, we\n",
    "can go ahead and estimate the model."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<h3>Iteration 046 [Converged] </h3>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<p>LL = -3493.0397302098218</p>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>value</th>\n",
       "      <th>initvalue</th>\n",
       "      <th>nullvalue</th>\n",
       "      <th>minimum</th>\n",
       "      <th>maximum</th>\n",
       "      <th>holdfast</th>\n",
       "      <th>note</th>\n",
       "      <th>best</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>ASC_Bike</th>\n",
       "      <td>-0.258430</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.258430</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ASC_SR</th>\n",
       "      <td>1.422554</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>1.422554</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ASC_Transit</th>\n",
       "      <td>6.753915</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>6.753915</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ASC_Walk</th>\n",
       "      <td>8.621143</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>8.621143</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cost</th>\n",
       "      <td>-0.175666</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.175666</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>InVehTime</th>\n",
       "      <td>-0.123722</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.123722</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>LogIncome:Bike</th>\n",
       "      <td>-0.196942</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.196942</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>LogIncome:SR</th>\n",
       "      <td>-0.193766</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.193766</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>LogIncome:Transit</th>\n",
       "      <td>-0.557110</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.557110</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>LogIncome:Walk</th>\n",
       "      <td>-0.522755</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.522755</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mu:Car</th>\n",
       "      <td>0.259244</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.001</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>0.259244</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mu:Motor</th>\n",
       "      <td>0.801586</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.001</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>0.801586</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mu:NonMotor</th>\n",
       "      <td>0.853765</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.001</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>0.853765</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>NonMotorTime</th>\n",
       "      <td>-0.265583</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.265583</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>OutVehTime</th>\n",
       "      <td>-0.254790</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-inf</td>\n",
       "      <td>inf</td>\n",
       "      <td>0</td>\n",
       "      <td></td>\n",
       "      <td>-0.254790</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      value  initvalue  nullvalue  minimum  maximum  holdfast  \\\n",
       "ASC_Bike          -0.258430        0.0        0.0     -inf      inf         0   \n",
       "ASC_SR             1.422554        0.0        0.0     -inf      inf         0   \n",
       "ASC_Transit        6.753915        0.0        0.0     -inf      inf         0   \n",
       "ASC_Walk           8.621143        0.0        0.0     -inf      inf         0   \n",
       "Cost              -0.175666        0.0        0.0     -inf      inf         0   \n",
       "InVehTime         -0.123722        0.0        0.0     -inf      inf         0   \n",
       "LogIncome:Bike    -0.196942        0.0        0.0     -inf      inf         0   \n",
       "LogIncome:SR      -0.193766        0.0        0.0     -inf      inf         0   \n",
       "LogIncome:Transit -0.557110        0.0        0.0     -inf      inf         0   \n",
       "LogIncome:Walk    -0.522755        0.0        0.0     -inf      inf         0   \n",
       "Mu:Car             0.259244        1.0        1.0    0.001      1.0         0   \n",
       "Mu:Motor           0.801586        1.0        1.0    0.001      1.0         0   \n",
       "Mu:NonMotor        0.853765        1.0        1.0    0.001      1.0         0   \n",
       "NonMotorTime      -0.265583        0.0        0.0     -inf      inf         0   \n",
       "OutVehTime        -0.254790        0.0        0.0     -inf      inf         0   \n",
       "\n",
       "                  note      best  \n",
       "ASC_Bike               -0.258430  \n",
       "ASC_SR                  1.422554  \n",
       "ASC_Transit             6.753915  \n",
       "ASC_Walk                8.621143  \n",
       "Cost                   -0.175666  \n",
       "InVehTime              -0.123722  \n",
       "LogIncome:Bike         -0.196942  \n",
       "LogIncome:SR           -0.193766  \n",
       "LogIncome:Transit      -0.557110  \n",
       "LogIncome:Walk         -0.522755  \n",
       "Mu:Car                  0.259244  \n",
       "Mu:Motor                0.801586  \n",
       "Mu:NonMotor             0.853765  \n",
       "NonMotorTime           -0.265583  \n",
       "OutVehTime             -0.254790  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/Users/jeffnewman/opt/anaconda3/envs/garage37/lib/python3.7/site-packages/numpy/core/_methods.py:38: RuntimeWarning: invalid value encountered in reduce\n",
      "  return umr_sum(a, axis, dtype, out, keepdims, initial, where)\n",
      "/Users/jeffnewman/opt/anaconda3/envs/garage37/lib/python3.7/site-packages/numpy/core/_methods.py:38: RuntimeWarning: invalid value encountered in reduce\n",
      "  return umr_sum(a, axis, dtype, out, keepdims, initial, where)\n"
     ]
    }
   ],
   "source": [
    "result = m.maximize_loglike(method='slsqp')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "After we find the best fitting parameters, we can compute\n",
    "some variance-covariance statistics, incuding standard errors of\n",
    "the estimates and t statistics, using `calculate_parameter_covariance`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [],
   "source": [
    "m.calculate_parameter_covariance()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Then we can review the results in a variety of report tables."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "    #T_748fa108_8f18_11ea_8471_acde48001122 th {\n",
       "          vertical-align: top;\n",
       "          text-align: left;\n",
       "    }    #T_748fa108_8f18_11ea_8471_acde48001122 td {\n",
       "          vertical-align: top;\n",
       "          text-align: left;\n",
       "    }    #T_748fa108_8f18_11ea_8471_acde48001122row0_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row0_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row0_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row0_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row0_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row1_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row1_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row1_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row1_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row1_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row2_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row2_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row2_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row2_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row2_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row3_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row3_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row3_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row3_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row3_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row4_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row4_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row4_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row4_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row4_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row5_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row5_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row5_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row5_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row5_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row6_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row6_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row6_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row6_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row6_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row7_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row7_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row7_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row7_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row7_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row8_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row8_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row8_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row8_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row8_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row9_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row9_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row9_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row9_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row9_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row10_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row10_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row10_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row10_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row10_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row11_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row11_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row11_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row11_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row11_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row12_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row12_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row12_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row12_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row12_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row13_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row13_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row13_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row13_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row13_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row14_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row14_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row14_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row14_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_748fa108_8f18_11ea_8471_acde48001122row14_col4 {\n",
       "            font-family: monospace;\n",
       "        }</style><table id=\"T_748fa108_8f18_11ea_8471_acde48001122\" ><thead>    <tr>        <th class=\"blank level0\" ></th>        <th class=\"col_heading level0 col0\" >Value</th>        <th class=\"col_heading level0 col1\" >Std Err</th>        <th class=\"col_heading level0 col2\" >t Stat</th>        <th class=\"col_heading level0 col3\" >Signif</th>        <th class=\"col_heading level0 col4\" >Null Value</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row0\" class=\"row_heading level0 row0\" >ASC_Bike</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row0_col0\" class=\"data row0 col0\" >-0.258</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row0_col1\" class=\"data row0 col1\" > 1.34</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row0_col2\" class=\"data row0 col2\" >-0.19</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row0_col3\" class=\"data row0 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row0_col4\" class=\"data row0 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row1\" class=\"row_heading level0 row1\" >ASC_SR</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row1_col0\" class=\"data row1 col0\" > 1.42</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row1_col1\" class=\"data row1 col1\" > 1.00</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row1_col2\" class=\"data row1 col2\" > 1.42</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row1_col3\" class=\"data row1 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row1_col4\" class=\"data row1 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row2\" class=\"row_heading level0 row2\" >ASC_Transit</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row2_col0\" class=\"data row2 col0\" > 6.75</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row2_col1\" class=\"data row2 col1\" > 2.06</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row2_col2\" class=\"data row2 col2\" > 3.27</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row2_col3\" class=\"data row2 col3\" >**</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row2_col4\" class=\"data row2 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row3\" class=\"row_heading level0 row3\" >ASC_Walk</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row3_col0\" class=\"data row3 col0\" > 8.62</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row3_col1\" class=\"data row3 col1\" > 1.14</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row3_col2\" class=\"data row3 col2\" > 7.57</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row3_col3\" class=\"data row3 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row3_col4\" class=\"data row3 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row4\" class=\"row_heading level0 row4\" >Cost</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row4_col0\" class=\"data row4 col0\" >-0.176</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row4_col1\" class=\"data row4 col1\" > 0.120</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row4_col2\" class=\"data row4 col2\" >-1.47</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row4_col3\" class=\"data row4 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row4_col4\" class=\"data row4 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row5\" class=\"row_heading level0 row5\" >InVehTime</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row5_col0\" class=\"data row5 col0\" >-0.124</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row5_col1\" class=\"data row5 col1\" > 0.0292</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row5_col2\" class=\"data row5 col2\" >-4.24</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row5_col3\" class=\"data row5 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row5_col4\" class=\"data row5 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row6\" class=\"row_heading level0 row6\" >LogIncome:Bike</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row6_col0\" class=\"data row6 col0\" >-0.197</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row6_col1\" class=\"data row6 col1\" > 0.124</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row6_col2\" class=\"data row6 col2\" >-1.59</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row6_col3\" class=\"data row6 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row6_col4\" class=\"data row6 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row7\" class=\"row_heading level0 row7\" >LogIncome:SR</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row7_col0\" class=\"data row7 col0\" >-0.194</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row7_col1\" class=\"data row7 col1\" > 0.135</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row7_col2\" class=\"data row7 col2\" >-1.43</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row7_col3\" class=\"data row7 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row7_col4\" class=\"data row7 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row8\" class=\"row_heading level0 row8\" >LogIncome:Transit</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row8_col0\" class=\"data row8 col0\" >-0.557</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row8_col1\" class=\"data row8 col1\" > 0.169</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row8_col2\" class=\"data row8 col2\" >-3.29</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row8_col3\" class=\"data row8 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row8_col4\" class=\"data row8 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row9\" class=\"row_heading level0 row9\" >LogIncome:Walk</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row9_col0\" class=\"data row9 col0\" >-0.523</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row9_col1\" class=\"data row9 col1\" > 0.100</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row9_col2\" class=\"data row9 col2\" >-5.21</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row9_col3\" class=\"data row9 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row9_col4\" class=\"data row9 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row10\" class=\"row_heading level0 row10\" >Mu:Car</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row10_col0\" class=\"data row10 col0\" > 0.259</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row10_col1\" class=\"data row10 col1\" > 0.181</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row10_col2\" class=\"data row10 col2\" >-4.10</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row10_col3\" class=\"data row10 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row10_col4\" class=\"data row10 col4\" > 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row11\" class=\"row_heading level0 row11\" >Mu:Motor</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row11_col0\" class=\"data row11 col0\" > 0.802</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row11_col1\" class=\"data row11 col1\" > 0.201</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row11_col2\" class=\"data row11 col2\" >-0.99</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row11_col3\" class=\"data row11 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row11_col4\" class=\"data row11 col4\" > 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row12\" class=\"row_heading level0 row12\" >Mu:NonMotor</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row12_col0\" class=\"data row12 col0\" > 0.854</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row12_col1\" class=\"data row12 col1\" > 0.112</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row12_col2\" class=\"data row12 col2\" >-1.30</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row12_col3\" class=\"data row12 col3\" ></td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row12_col4\" class=\"data row12 col4\" > 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row13\" class=\"row_heading level0 row13\" >NonMotorTime</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row13_col0\" class=\"data row13 col0\" >-0.266</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row13_col1\" class=\"data row13 col1\" > 0.0163</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row13_col2\" class=\"data row13 col2\" >-16.29</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row13_col3\" class=\"data row13 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row13_col4\" class=\"data row13 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th id=\"T_748fa108_8f18_11ea_8471_acde48001122level0_row14\" class=\"row_heading level0 row14\" >OutVehTime</th>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row14_col0\" class=\"data row14 col0\" >-0.255</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row14_col1\" class=\"data row14 col1\" > 0.0646</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row14_col2\" class=\"data row14 col2\" >-3.95</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row14_col3\" class=\"data row14 col3\" >***</td>\n",
       "                        <td id=\"T_748fa108_8f18_11ea_8471_acde48001122row14_col4\" class=\"data row14 col4\" > 0.00</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7fc1c1abef10>"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "m.parameter_summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div><table><thead><tr><th>Statistic</th><th>Aggregate</th><th>Per Case</th></tr><tr><td>Number of Cases</td><td colspan=\"2\">7564</td></tr><tr><td>Log Likelihood at Convergence</td><td>-3493.04</td><td>-0.46</td></tr><tr><td>Log Likelihood at Null Parameters</td><td>-10644.66</td><td>-1.41</td></tr><tr><td>Rho Squared w.r.t. Null Parameters</td><td colspan=\"2\">0.672</td></tr></thead><tbody></tbody></table></div>"
      ],
      "text/plain": [
       "<xmle.Elem 'div' with 1 children>"
      ]
     },
     "execution_count": 26,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "m.estimation_statistics()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Save and Report Model"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [],
   "source": [
    "report = larch.Reporter(title=m.title)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<h1><a class=\"toc\" name=\"rx1\" reftxt=\"Parameter Summary\" toclevel=\"1\"></a>Parameter Summary</h1><div><style type=\"text/css\">\n",
       "    #T_74b2b8be_8f18_11ea_8471_acde48001122 th {\n",
       "          vertical-align: top;\n",
       "          text-align: left;\n",
       "    }    #T_74b2b8be_8f18_11ea_8471_acde48001122 td {\n",
       "          vertical-align: top;\n",
       "          text-align: left;\n",
       "    }    #T_74b2b8be_8f18_11ea_8471_acde48001122row0_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row0_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row0_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row0_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row0_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row1_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row1_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row1_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row1_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row1_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row2_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row2_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row2_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row2_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row2_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row3_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row3_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row3_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row3_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row3_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row4_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row4_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row4_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row4_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row4_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row5_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row5_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row5_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row5_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row5_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row6_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row6_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row6_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row6_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row6_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row7_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row7_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row7_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row7_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row7_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row8_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row8_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row8_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row8_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row8_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row9_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row9_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row9_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row9_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row9_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row10_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row10_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row10_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row10_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row10_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row11_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row11_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row11_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row11_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row11_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row12_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row12_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row12_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row12_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row12_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row13_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row13_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row13_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row13_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row13_col4 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row14_col0 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row14_col1 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row14_col2 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row14_col3 {\n",
       "            font-family: monospace;\n",
       "        }    #T_74b2b8be_8f18_11ea_8471_acde48001122row14_col4 {\n",
       "            font-family: monospace;\n",
       "        }</style><table id=\"T_74b2b8be_8f18_11ea_8471_acde48001122\"><thead>    <tr>        <th class=\"blank level0\"></th>        <th class=\"col_heading level0 col0\">Value</th>        <th class=\"col_heading level0 col1\">Std Err</th>        <th class=\"col_heading level0 col2\">t Stat</th>        <th class=\"col_heading level0 col3\">Signif</th>        <th class=\"col_heading level0 col4\">Null Value</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                        <th class=\"row_heading level0 row0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row0\">ASC_Bike</th>\n",
       "                        <td class=\"data row0 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row0_col0\">-0.258</td>\n",
       "                        <td class=\"data row0 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row0_col1\"> 1.34</td>\n",
       "                        <td class=\"data row0 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row0_col2\">-0.19</td>\n",
       "                        <td class=\"data row0 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row0_col3\"></td>\n",
       "                        <td class=\"data row0 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row0_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row1\">ASC_SR</th>\n",
       "                        <td class=\"data row1 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row1_col0\"> 1.42</td>\n",
       "                        <td class=\"data row1 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row1_col1\"> 1.00</td>\n",
       "                        <td class=\"data row1 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row1_col2\"> 1.42</td>\n",
       "                        <td class=\"data row1 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row1_col3\"></td>\n",
       "                        <td class=\"data row1 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row1_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row2\">ASC_Transit</th>\n",
       "                        <td class=\"data row2 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row2_col0\"> 6.75</td>\n",
       "                        <td class=\"data row2 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row2_col1\"> 2.06</td>\n",
       "                        <td class=\"data row2 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row2_col2\"> 3.27</td>\n",
       "                        <td class=\"data row2 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row2_col3\">**</td>\n",
       "                        <td class=\"data row2 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row2_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row3\">ASC_Walk</th>\n",
       "                        <td class=\"data row3 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row3_col0\"> 8.62</td>\n",
       "                        <td class=\"data row3 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row3_col1\"> 1.14</td>\n",
       "                        <td class=\"data row3 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row3_col2\"> 7.57</td>\n",
       "                        <td class=\"data row3 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row3_col3\">***</td>\n",
       "                        <td class=\"data row3 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row3_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row4\">Cost</th>\n",
       "                        <td class=\"data row4 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row4_col0\">-0.176</td>\n",
       "                        <td class=\"data row4 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row4_col1\"> 0.120</td>\n",
       "                        <td class=\"data row4 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row4_col2\">-1.47</td>\n",
       "                        <td class=\"data row4 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row4_col3\"></td>\n",
       "                        <td class=\"data row4 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row4_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row5\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row5\">InVehTime</th>\n",
       "                        <td class=\"data row5 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row5_col0\">-0.124</td>\n",
       "                        <td class=\"data row5 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row5_col1\"> 0.0292</td>\n",
       "                        <td class=\"data row5 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row5_col2\">-4.24</td>\n",
       "                        <td class=\"data row5 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row5_col3\">***</td>\n",
       "                        <td class=\"data row5 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row5_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row6\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row6\">LogIncome:Bike</th>\n",
       "                        <td class=\"data row6 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row6_col0\">-0.197</td>\n",
       "                        <td class=\"data row6 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row6_col1\"> 0.124</td>\n",
       "                        <td class=\"data row6 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row6_col2\">-1.59</td>\n",
       "                        <td class=\"data row6 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row6_col3\"></td>\n",
       "                        <td class=\"data row6 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row6_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row7\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row7\">LogIncome:SR</th>\n",
       "                        <td class=\"data row7 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row7_col0\">-0.194</td>\n",
       "                        <td class=\"data row7 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row7_col1\"> 0.135</td>\n",
       "                        <td class=\"data row7 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row7_col2\">-1.43</td>\n",
       "                        <td class=\"data row7 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row7_col3\"></td>\n",
       "                        <td class=\"data row7 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row7_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row8\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row8\">LogIncome:Transit</th>\n",
       "                        <td class=\"data row8 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row8_col0\">-0.557</td>\n",
       "                        <td class=\"data row8 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row8_col1\"> 0.169</td>\n",
       "                        <td class=\"data row8 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row8_col2\">-3.29</td>\n",
       "                        <td class=\"data row8 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row8_col3\">***</td>\n",
       "                        <td class=\"data row8 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row8_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row9\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row9\">LogIncome:Walk</th>\n",
       "                        <td class=\"data row9 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row9_col0\">-0.523</td>\n",
       "                        <td class=\"data row9 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row9_col1\"> 0.100</td>\n",
       "                        <td class=\"data row9 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row9_col2\">-5.21</td>\n",
       "                        <td class=\"data row9 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row9_col3\">***</td>\n",
       "                        <td class=\"data row9 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row9_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row10\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row10\">Mu:Car</th>\n",
       "                        <td class=\"data row10 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row10_col0\"> 0.259</td>\n",
       "                        <td class=\"data row10 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row10_col1\"> 0.181</td>\n",
       "                        <td class=\"data row10 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row10_col2\">-4.10</td>\n",
       "                        <td class=\"data row10 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row10_col3\">***</td>\n",
       "                        <td class=\"data row10 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row10_col4\"> 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row11\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row11\">Mu:Motor</th>\n",
       "                        <td class=\"data row11 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row11_col0\"> 0.802</td>\n",
       "                        <td class=\"data row11 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row11_col1\"> 0.201</td>\n",
       "                        <td class=\"data row11 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row11_col2\">-0.99</td>\n",
       "                        <td class=\"data row11 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row11_col3\"></td>\n",
       "                        <td class=\"data row11 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row11_col4\"> 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row12\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row12\">Mu:NonMotor</th>\n",
       "                        <td class=\"data row12 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row12_col0\"> 0.854</td>\n",
       "                        <td class=\"data row12 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row12_col1\"> 0.112</td>\n",
       "                        <td class=\"data row12 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row12_col2\">-1.30</td>\n",
       "                        <td class=\"data row12 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row12_col3\"></td>\n",
       "                        <td class=\"data row12 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row12_col4\"> 1.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row13\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row13\">NonMotorTime</th>\n",
       "                        <td class=\"data row13 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row13_col0\">-0.266</td>\n",
       "                        <td class=\"data row13 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row13_col1\"> 0.0163</td>\n",
       "                        <td class=\"data row13 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row13_col2\">-16.29</td>\n",
       "                        <td class=\"data row13 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row13_col3\">***</td>\n",
       "                        <td class=\"data row13 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row13_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                        <th class=\"row_heading level0 row14\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122level0_row14\">OutVehTime</th>\n",
       "                        <td class=\"data row14 col0\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row14_col0\">-0.255</td>\n",
       "                        <td class=\"data row14 col1\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row14_col1\"> 0.0646</td>\n",
       "                        <td class=\"data row14 col2\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row14_col2\">-3.95</td>\n",
       "                        <td class=\"data row14 col3\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row14_col3\">***</td>\n",
       "                        <td class=\"data row14 col4\" id=\"T_74b2b8be_8f18_11ea_8471_acde48001122row14_col4\"> 0.00</td>\n",
       "            </tr>\n",
       "    </tbody></table></div>"
      ],
      "text/plain": [
       "<xmle.Elem 'div' with 3 children>"
      ]
     },
     "execution_count": 28,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "report << '# Parameter Summary' << m.parameter_summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<h1><a class=\"toc\" name=\"rx2\" reftxt=\"Estimation Statistics\" toclevel=\"1\"></a>Estimation Statistics</h1><div><table><thead><tr><th>Statistic</th><th>Aggregate</th><th>Per Case</th></tr><tr><td>Number of Cases</td><td colspan=\"2\">7564</td></tr><tr><td>Log Likelihood at Convergence</td><td>-3493.04</td><td>-0.46</td></tr><tr><td>Log Likelihood at Null Parameters</td><td>-10644.66</td><td>-1.41</td></tr><tr><td>Rho Squared w.r.t. Null Parameters</td><td colspan=\"2\">0.672</td></tr></thead><tbody></tbody></table></div>"
      ],
      "text/plain": [
       "<xmle.Elem 'div' with 5 children>"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "report << \"# Estimation Statistics\" << m.estimation_statistics()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<h1><a class=\"toc\" name=\"rx3\" reftxt=\"Utility Functions\" toclevel=\"1\"></a>Utility Functions</h1><div><table class=\"floatinghead\" style=\"margin-top:1px;\"><thead><tr><th>alt</th><th style=\"text-align:left;\">formula</th></tr></thead><tbody><tr><td>1</td><td style=\"text-align:left;\"><div></div> + <span class=\"LinearFunc_Param\">P.InVehTime</span> * <span class=\"LinearFunc_Data\">X.AUTO_TIME</span><br> + <span class=\"LinearFunc_Param\">P.Cost</span> * <span class=\"LinearFunc_Data\">X.AUTO_COST</span></td></tr><tr><td>2</td><td style=\"text-align:left;\"><div></div> + <span class=\"LinearFunc_Param\">P.ASC_SR</span><br> + <span class=\"LinearFunc_Param\">P.InVehTime</span> * <span class=\"LinearFunc_Data\">X.AUTO_TIME</span><br> + <span class=\"LinearFunc_Param\">P.Cost</span> * 0.5 * <span class=\"LinearFunc_Data\">X.AUTO_COST</span><br> + <span class=\"LinearFunc_Param\">P('LogIncome:SR')</span> * <span class=\"LinearFunc_Data\">X('log(INCOME)')</span></td></tr><tr><td>3</td><td style=\"text-align:left;\"><div></div> + <span class=\"LinearFunc_Param\">P.ASC_Walk</span><br> + <span class=\"LinearFunc_Param\">P.NonMotorTime</span> * <span class=\"LinearFunc_Data\">X.WALK_TIME</span><br> + <span class=\"LinearFunc_Param\">P('LogIncome:Walk')</span> * <span class=\"LinearFunc_Data\">X('log(INCOME)')</span></td></tr><tr><td>4</td><td style=\"text-align:left;\"><div></div> + <span class=\"LinearFunc_Param\">P.ASC_Bike</span><br> + <span class=\"LinearFunc_Param\">P.NonMotorTime</span> * <span class=\"LinearFunc_Data\">X.BIKE_TIME</span><br> + <span class=\"LinearFunc_Param\">P('LogIncome:Bike')</span> * <span class=\"LinearFunc_Data\">X('log(INCOME)')</span></td></tr><tr><td>5</td><td style=\"text-align:left;\"><div></div> + <span class=\"LinearFunc_Param\">P.ASC_Transit</span><br> + <span class=\"LinearFunc_Param\">P.InVehTime</span> * <span class=\"LinearFunc_Data\">X.TRANSIT_IVTT</span><br> + <span class=\"LinearFunc_Param\">P.OutVehTime</span> * <span class=\"LinearFunc_Data\">X.TRANSIT_OVTT</span><br> + <span class=\"LinearFunc_Param\">P.Cost</span> * <span class=\"LinearFunc_Data\">X.TRANSIT_FARE</span><br> + <span class=\"LinearFunc_Param\">P('LogIncome:Transit')</span> * <span class=\"LinearFunc_Data\">X('log(INCOME)')</span></td></tr></tbody></table></div>"
      ],
      "text/plain": [
       "<xmle.Elem 'div' with 7 children>"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "report << \"# Utility Functions\" << m.utility_functions()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'/tmp/exampville_mode_choice.html'"
      ]
     },
     "execution_count": 31,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "report.save(\n",
    "    '/tmp/exampville_mode_choice.html', \n",
    "    overwrite=True, \n",
    "    metadata=m,\n",
    ")"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {},
   "toc_section_display": true,
   "toc_window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
