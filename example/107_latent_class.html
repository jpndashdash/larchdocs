

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>107: Latent Class Models &mdash; Larch 5.2.12 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/larch_favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/larch_rtfd.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="109: Swissmetro Nested Logit Mode Choice" href="109_nl.html" />
    <link rel="prev" title="102: Swissmetro Weighted MNL Mode Choice" href="102_mnl_weighted.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Larch
          

          
          </a>

          
            
            
              <div class="version">
                5.2.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math.html">Mathematics of Logit Choice Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine-learning/index.html">Machine Learning</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mtc.html">MTC Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="swissmetro.html">Swissmetro Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="101_mnl.html">101: Swissmetro MNL Mode Choice</a></li>
<li class="toctree-l3"><a class="reference internal" href="102_mnl_weighted.html">102: Swissmetro Weighted MNL Mode Choice</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">107: Latent Class Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Class-Model-Setup">Class Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Class-Membership-Model">Class Membership Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Latent-Class-Model">Latent Class Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Reporting-Results">Reporting Results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="109_nl.html">109: Swissmetro Nested Logit Mode Choice</a></li>
<li class="toctree-l3"><a class="reference internal" href="111_cnl.html">111: Swissmetro Cross-Nested Logit Mode Choice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exampville.html">Exampville Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="itinerary.html">Itinerary Choice Examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Larch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="examples.html">Examples</a> &raquo;</li>
        
          <li><a href="swissmetro.html">Swissmetro Examples</a> &raquo;</li>
        
      <li>107: Latent Class Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/example/107_latent_class.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="107:-Latent-Class-Models">
<h1>107: Latent Class Models<a class="headerlink" href="#107:-Latent-Class-Models" title="Permalink to this headline">¶</a></h1>
<p>In this example, we will replicate the <a class="reference external" href="http://biogeme.epfl.ch/examples/swissmetro/pandas/07discreteMixture.py">latent class example model</a> from Biogeme.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">larch</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">larch.roles</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span><span class="n">X</span>
</pre></div>
</div>
</div>
<p>The swissmetro dataset used in this example is conveniently bundled with Larch, accessible using the <code class="docutils literal notranslate"><span class="pre">data_warehouse</span></code> module. We’ll load this file using the pandas <code class="docutils literal notranslate"><span class="pre">`read_csv</span></code> &lt;<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html</a>&gt;`__ command.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">larch</span> <span class="kn">import</span> <span class="n">data_warehouse</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">larch</span><span class="o">.</span><span class="n">data_warehouse</span><span class="o">.</span><span class="n">example_file</span><span class="p">(</span><span class="s1">&#39;swissmetro.csv.gz&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>We can inspect a few rows of data to see what we have using the <code class="docutils literal notranslate"><span class="pre">head</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GROUP</th>
      <th>SURVEY</th>
      <th>SP</th>
      <th>ID</th>
      <th>PURPOSE</th>
      <th>FIRST</th>
      <th>TICKET</th>
      <th>WHO</th>
      <th>LUGGAGE</th>
      <th>AGE</th>
      <th>...</th>
      <th>TRAIN_TT</th>
      <th>TRAIN_CO</th>
      <th>TRAIN_HE</th>
      <th>SM_TT</th>
      <th>SM_CO</th>
      <th>SM_HE</th>
      <th>SM_SEATS</th>
      <th>CAR_TT</th>
      <th>CAR_CO</th>
      <th>CHOICE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>112</td>
      <td>48</td>
      <td>120</td>
      <td>63</td>
      <td>52</td>
      <td>20</td>
      <td>0</td>
      <td>117</td>
      <td>65</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>103</td>
      <td>48</td>
      <td>30</td>
      <td>60</td>
      <td>49</td>
      <td>10</td>
      <td>0</td>
      <td>117</td>
      <td>84</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>130</td>
      <td>48</td>
      <td>60</td>
      <td>67</td>
      <td>58</td>
      <td>30</td>
      <td>0</td>
      <td>117</td>
      <td>52</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>103</td>
      <td>40</td>
      <td>30</td>
      <td>63</td>
      <td>52</td>
      <td>20</td>
      <td>0</td>
      <td>72</td>
      <td>52</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>130</td>
      <td>36</td>
      <td>60</td>
      <td>63</td>
      <td>42</td>
      <td>20</td>
      <td>0</td>
      <td>90</td>
      <td>84</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div>
</div>
<p>The Biogeme code includes a variety of commands to manipulate the data and create new variables. Because Larch sits on top of pandas, a reasonable method to create new variables is to just create new columns in the source <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> in the usual manner for any <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="p">[</span><span class="s1">&#39;SM_COST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;SM_CO&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;GA&quot;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">eval</span></code> method of pandas DataFrames. This method takes an expression as a string and evaluates it within a namespace that has already loaded the column names as variables.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_COST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;TRAIN_CO * (GA == 0)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This can allow for writing data expressions more succinctly, as long as all your variable names are strings that can also be the names of variables in Python. If this isn’t the case (e.g., if any variable names have spaces in the name) you’ll be better off if you stay away from this feature.</p>
<p>We can mix and match between these two method to create new columns in any DataFrame as needed.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_COST_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_COST&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_TT_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_TT&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>

<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;SM_COST_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;SM_COST / 100&#39;</span><span class="p">)</span>
<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;SM_TT_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;SM_TT&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>

<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;CAR_CO_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;CAR_CO&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;CAR_TT_SCALED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;CAR_TT&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="p">[</span><span class="s1">&#39;CAR_AV_SP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;CAR_AV * (SP!=0)&quot;</span><span class="p">)</span>
<span class="n">raw</span><span class="p">[</span><span class="s1">&#39;TRAIN_AV_SP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;TRAIN_AV * (SP!=0)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Removing some observations can also be done directly using pandas. Here we identify a subset of observations that we want to keep.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">keep</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">&quot;PURPOSE in (1,3) and CHOICE != 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You may note that we don’t assign this value to a column within the <code class="docutils literal notranslate"><span class="pre">raw</span></code> DataFrame. This is perfectly acceptable, as the output from the <code class="docutils literal notranslate"><span class="pre">eval</span></code> method is just a normal pandas.Series, like any other single column output you might expect to get from a pandas method.</p>
<p>When you’ve created the data you need, you can pass the dataframe to the larch.DataFrames constructor. Since the <em>swissmetro</em> data is in <code class="docutils literal notranslate"><span class="pre">idco</span></code> format, we’ll need to explicitly identify the alternative codes as well.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">larch</span><span class="o">.</span><span class="n">DataFrames</span><span class="p">(</span><span class="n">raw</span><span class="p">[</span><span class="n">keep</span><span class="p">],</span> <span class="n">alt_codes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>The info method of the DataFrames object gives a short summary of the contents.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dfs</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
larch.DataFrames:  (not computation-ready)
  n_cases: 6768
  n_alts: 3
  data_ca: &lt;not populated&gt;
  data_co: 38 variables
</pre></div></div>
</div>
<p>A longer summary is available by setting verbose to True.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dfs</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
larch.DataFrames:  (not computation-ready)
  n_cases: 6768
  n_alts: 3
  data_ca: &lt;not populated&gt;
  data_co:
    - GROUP
    - SURVEY
    - SP
    - ID
    - PURPOSE
    - FIRST
    - TICKET
    - WHO
    - LUGGAGE
    - AGE
    - MALE
    - INCOME
    - GA
    - ORIGIN
    - DEST
    - TRAIN_AV
    - CAR_AV
    - SM_AV
    - TRAIN_TT
    - TRAIN_CO
    - TRAIN_HE
    - SM_TT
    - SM_CO
    - SM_HE
    - SM_SEATS
    - CAR_TT
    - CAR_CO
    - CHOICE
    - SM_COST
    - TRAIN_COST
    - TRAIN_COST_SCALED
    - TRAIN_TT_SCALED
    - SM_COST_SCALED
    - SM_TT_SCALED
    - CAR_CO_SCALED
    - CAR_TT_SCALED
    - CAR_AV_SP
    - TRAIN_AV_SP
</pre></div></div>
</div>
<p>You may have noticed that the info summary notes that this data is “not computation-ready”. That’s because some of the data columns are stored as integers, which can be observed by inspecting the info on the data_co dataframe.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dfs</span><span class="o">.</span><span class="n">data_co</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 6768 entries, 0 to 8450
Data columns (total 38 columns):
GROUP                6768 non-null int64
SURVEY               6768 non-null int64
SP                   6768 non-null int64
ID                   6768 non-null int64
PURPOSE              6768 non-null int64
FIRST                6768 non-null int64
TICKET               6768 non-null int64
WHO                  6768 non-null int64
LUGGAGE              6768 non-null int64
AGE                  6768 non-null int64
MALE                 6768 non-null int64
INCOME               6768 non-null int64
GA                   6768 non-null int64
ORIGIN               6768 non-null int64
DEST                 6768 non-null int64
TRAIN_AV             6768 non-null int64
CAR_AV               6768 non-null int64
SM_AV                6768 non-null int64
TRAIN_TT             6768 non-null int64
TRAIN_CO             6768 non-null int64
TRAIN_HE             6768 non-null int64
SM_TT                6768 non-null int64
SM_CO                6768 non-null int64
SM_HE                6768 non-null int64
SM_SEATS             6768 non-null int64
CAR_TT               6768 non-null int64
CAR_CO               6768 non-null int64
CHOICE               6768 non-null int64
SM_COST              6768 non-null int64
TRAIN_COST           6768 non-null int64
TRAIN_COST_SCALED    6768 non-null float64
TRAIN_TT_SCALED      6768 non-null float64
SM_COST_SCALED       6768 non-null float64
SM_TT_SCALED         6768 non-null float64
CAR_CO_SCALED        6768 non-null float64
CAR_TT_SCALED        6768 non-null float64
CAR_AV_SP            6768 non-null int64
TRAIN_AV_SP          6768 non-null int64
dtypes: float64(6), int64(32)
memory usage: 2.0 MB
</pre></div></div>
</div>
<p>When computations are run, we’ll need all the data to be in float format, but Larch knows this and will handle it for you later.</p>
<div class="section" id="Class-Model-Setup">
<h2>Class Model Setup<a class="headerlink" href="#Class-Model-Setup" title="Permalink to this headline">¶</a></h2>
<p>Having prepped our data, we’re ready to set up discrete choices models for each class in the latent class model. We’ll reproduce the Biogeme example exactly here, as a technology demonstation. Each of two classes will be set up with a simple MNL model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m1</span> <span class="o">=</span> <span class="n">larch</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">dataservice</span><span class="o">=</span><span class="n">dfs</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">availability_co_vars</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;TRAIN_AV_SP&quot;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;SM_AV&quot;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;CAR_AV_SP&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">m1</span><span class="o">.</span><span class="n">choice_co_code</span> <span class="o">=</span> <span class="s1">&#39;CHOICE&#39;</span>

<span class="n">m1</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;ASC_TRAIN&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;TRAIN_COST_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;SM_COST_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;ASC_CAR&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;CAR_CO_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m2</span> <span class="o">=</span> <span class="n">larch</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">dataservice</span><span class="o">=</span><span class="n">dfs</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">availability_co_vars</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;TRAIN_AV_SP&quot;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;SM_AV&quot;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;CAR_AV_SP&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">m2</span><span class="o">.</span><span class="n">choice_co_code</span> <span class="o">=</span> <span class="s1">&#39;CHOICE&#39;</span>

<span class="n">m2</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;ASC_TRAIN&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;TRAIN_TT_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_TIME&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;TRAIN_COST_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;SM_TT_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_TIME&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;SM_COST_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;ASC_CAR&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;CAR_TT_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_TIME&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">(</span><span class="s2">&quot;CAR_CO_SCALED&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;B_COST&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Class-Membership-Model">
<h2>Class Membership Model<a class="headerlink" href="#Class-Membership-Model" title="Permalink to this headline">¶</a></h2>
<p>For Larch, the class membership model will be set up as yet another discrete choice model. In this case, the choices are not the ultimate choices, but instead are the latent classes. To remain consistent with the Biogeme example, we’ll set up this model with only a single constant that determines class membership. Unlike Biogeme, this class membership will be represented with an MNL model, not a simple direct probability.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mk</span> <span class="o">=</span> <span class="n">larch</span><span class="o">.</span><span class="n">Model</span><span class="p">()</span>
<span class="n">mk</span><span class="o">.</span><span class="n">utility_co</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="s2">&quot;W_OTHER&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The utility function of the first class isn’t written here, which means it will implicitly be set as 0.</p>
</div>
<div class="section" id="Latent-Class-Model">
<h2>Latent Class Model<a class="headerlink" href="#Latent-Class-Model" title="Permalink to this headline">¶</a></h2>
<p>Now we’re ready to create the latent class model itself, by assembling the components we created above. The constructor for the <code class="docutils literal notranslate"><span class="pre">LatentClassModel</span></code> takes two arguments, a class membership model, and a dictionary of class models, where the keys in the dictionary correspond to the identifying codes from the utility functions we wrote for the class membership model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">larch.model.latentclass</span> <span class="kn">import</span> <span class="n">LatentClassModel</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">LatentClassModel</span><span class="p">(</span><span class="n">mk</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="n">m1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="n">m2</span><span class="p">})</span>
</pre></div>
</div>
</div>
<p>The we’ll load the data needed for our models using the <code class="docutils literal notranslate"><span class="pre">load_data</span></code> method. This step will assemble the data needed, and convert it to floating point format as required.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
converting data_ch to &lt;class &#39;numpy.float64&#39;&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">dataframes</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
larch.DataFrames:
  n_cases: 6768
  n_alts: 3
  data_ca: &lt;not populated&gt;
  data_co:
    - CAR_CO_SCALED
    - CAR_TT_SCALED
    - SM_COST_SCALED
    - SM_TT_SCALED
    - TRAIN_COST_SCALED
    - TRAIN_TT_SCALED
  data_av: &lt;populated&gt;
  data_ch: &lt;populated&gt;
</pre></div></div>
</div>
<p>Only the data actually needed by the models has been converted, which may help keep memory usage down on larger models. You may also note that the loaded dataframes no longer reports that it is “not computational-ready”.</p>
<p>To estimate the model, we’ll use the <code class="docutils literal notranslate"><span class="pre">maximize_loglike</span></code> method. When run in Jupyter, a live-view report of the parmeters and log likelihood is displayed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">maximize_loglike</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<h3>Iteration 056 [Converged] </h3></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<p>LL = -5208.498065961454</p></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>value</th>
      <th>initvalue</th>
      <th>nullvalue</th>
      <th>minimum</th>
      <th>maximum</th>
      <th>holdfast</th>
      <th>note</th>
      <th>best</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.124611</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>0.124611</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>-0.397611</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-0.397611</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>-1.263567</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-1.263567</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-2.797798</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-2.797798</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>1.094291</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>1.094291</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">result</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><table style="margin-top:1px;"><tr><th>key</th><th style="text-align:left;">value</th></tr><tr><td>loglike</td><td style="text-align:left;">-5208.498065961454</td></tr><tr><td>x</td><td style="text-align:left;"><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.124611</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>-0.397611</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>-1.263567</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-2.797798</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>1.094291</td>
    </tr>
  </tbody>
</table></td></tr><tr><td>tolerance</td><td style="text-align:left;">8.736059377268807e-06</td></tr><tr><td>steps</td><td style="text-align:left;"><pre>array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
       1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
       1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
       1., 1., 1., 1., 1.])</pre></td></tr><tr><td>message</td><td style="text-align:left;">'Optimization terminated successfully.'</td></tr><tr><td>elapsed_time</td><td style="text-align:left;">0:00:32.584511</td></tr><tr><td>method</td><td style="text-align:left;">'bhhh'</td></tr><tr><td>n_cases</td><td style="text-align:left;">6768</td></tr><tr><td>iteration_number</td><td style="text-align:left;">56</td></tr><tr><td>logloss</td><td style="text-align:left;">0.7695771374056521</td></tr></table></div></div>
</div>
<p>To complete our analysis, we can compute the log likelihood at “null” parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">loglike_null</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>-6964.662979191462
</pre></div>
</div>
</div>
<p>And the parameter covariance matrixes.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">calculate_parameter_covariance</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">covariance_matrix</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ASC_CAR</th>
      <th>ASC_TRAIN</th>
      <th>B_COST</th>
      <th>B_TIME</th>
      <th>W_OTHER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.002549</td>
      <td>0.001935</td>
      <td>0.000252</td>
      <td>-0.004538</td>
      <td>-0.000080</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>0.001935</td>
      <td>0.003702</td>
      <td>-0.000143</td>
      <td>-0.004348</td>
      <td>0.001439</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>0.000252</td>
      <td>-0.000143</td>
      <td>0.003742</td>
      <td>0.002839</td>
      <td>0.000620</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-0.004538</td>
      <td>-0.004348</td>
      <td>0.002839</td>
      <td>0.030840</td>
      <td>0.012869</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>-0.000080</td>
      <td>0.001439</td>
      <td>0.000620</td>
      <td>0.012869</td>
      <td>0.013563</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="o">.</span><span class="n">robust_covariance_matrix</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ASC_CAR</th>
      <th>ASC_TRAIN</th>
      <th>B_COST</th>
      <th>B_TIME</th>
      <th>W_OTHER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.010295</td>
      <td>0.008356</td>
      <td>0.001083</td>
      <td>-0.018769</td>
      <td>-0.001150</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>0.008356</td>
      <td>0.015392</td>
      <td>-0.001147</td>
      <td>-0.017526</td>
      <td>0.006384</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>0.001083</td>
      <td>-0.001147</td>
      <td>0.029295</td>
      <td>0.014484</td>
      <td>-0.000933</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-0.018770</td>
      <td>-0.017526</td>
      <td>0.014483</td>
      <td>0.117864</td>
      <td>0.047962</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>-0.001150</td>
      <td>0.006384</td>
      <td>-0.000933</td>
      <td>0.047962</td>
      <td>0.053560</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Reporting-Results">
<h2>Reporting Results<a class="headerlink" href="#Reporting-Results" title="Permalink to this headline">¶</a></h2>
<p>And then generate a report of the estimation statistics. Larch includes a <code class="docutils literal notranslate"><span class="pre">Reporter</span></code> class to help you assemble a report containing the relevant output you want.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">=</span> <span class="n">larch</span><span class="o">.</span><span class="n">Reporter</span><span class="p">(</span><span class="s2">&quot;Latent Class Example&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Pipe into the report section headers in markdown format (use one hash for top level headings, two hashes for lower levels, etc.)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;# Parameter Estimates&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<h1><a class="toc" name="rx1" reftxt="Parameter Estimates" toclevel="1"></a>Parameter Estimates</h1></div>
</div>
<p>You can also pipe in dataframes directly, include the <code class="docutils literal notranslate"><span class="pre">pf</span></code> parameter frame from the model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="o">.</span><span class="n">pf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="1">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>value</th>
      <th>initvalue</th>
      <th>nullvalue</th>
      <th>minimum</th>
      <th>maximum</th>
      <th>holdfast</th>
      <th>note</th>
      <th>best</th>
      <th>std err</th>
      <th>t stat</th>
      <th>robust std err</th>
      <th>robust t stat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.124611</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>0.124611</td>
      <td>0.050483</td>
      <td>2.468380</td>
      <td>0.101465</td>
      <td>1.228109</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>-0.397611</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-0.397611</td>
      <td>0.060847</td>
      <td>-6.534638</td>
      <td>0.124063</td>
      <td>-3.204911</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>-1.263567</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-1.263567</td>
      <td>0.061170</td>
      <td>-20.656769</td>
      <td>0.171159</td>
      <td>-7.382413</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-2.797798</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>-2.797798</td>
      <td>0.175613</td>
      <td>-15.931614</td>
      <td>0.343313</td>
      <td>-8.149405</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>1.094291</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-inf</td>
      <td>inf</td>
      <td>0</td>
      <td></td>
      <td>1.094291</td>
      <td>0.116461</td>
      <td>9.396203</td>
      <td>0.231430</td>
      <td>4.728383</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>And a selection of pre-formatted summary sections.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;# Estimation Statistics&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="o">.</span><span class="n">estimation_statistics</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<h1><a class="toc" name="rx2" reftxt="Estimation Statistics" toclevel="1"></a>Estimation Statistics</h1><div><table><thead><tr><th>Statistic</th><th>Aggregate</th><th>Per Case</th></tr><tr><td>Number of Cases</td><td colspan="2">6768</td></tr><tr><td>Log Likelihood at Convergence</td><td>-5208.50</td><td>-0.77</td></tr><tr><td>Log Likelihood at Null Parameters</td><td>-6964.66</td><td>-1.03</td></tr><tr><td>Rho Squared w.r.t. Null Parameters</td><td colspan="2">0.252</td></tr></thead><tbody></tbody></table></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;# Parameter Covariance&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;## Typical Parameter Covariance&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="o">.</span><span class="n">covariance_matrix</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;## Robust Parameter Covariance&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="o">.</span><span class="n">robust_covariance_matrix</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<h1><a class="toc" name="rx3" reftxt="Parameter Covariance" toclevel="1"></a>Parameter Covariance</h1><h2><a class="toc" name="rx4" reftxt="Typical Parameter Covariance" toclevel="2"></a>Typical Parameter Covariance</h2><div>
<style scoped="1">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ASC_CAR</th>
      <th>ASC_TRAIN</th>
      <th>B_COST</th>
      <th>B_TIME</th>
      <th>W_OTHER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.002549</td>
      <td>0.001935</td>
      <td>0.000252</td>
      <td>-0.004538</td>
      <td>-0.000080</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>0.001935</td>
      <td>0.003702</td>
      <td>-0.000143</td>
      <td>-0.004348</td>
      <td>0.001439</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>0.000252</td>
      <td>-0.000143</td>
      <td>0.003742</td>
      <td>0.002839</td>
      <td>0.000620</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-0.004538</td>
      <td>-0.004348</td>
      <td>0.002839</td>
      <td>0.030840</td>
      <td>0.012869</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>-0.000080</td>
      <td>0.001439</td>
      <td>0.000620</td>
      <td>0.012869</td>
      <td>0.013563</td>
    </tr>
  </tbody>
</table>
</div><h2><a class="toc" name="rx5" reftxt="Robust Parameter Covariance" toclevel="2"></a>Robust Parameter Covariance</h2><div>
<style scoped="1">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ASC_CAR</th>
      <th>ASC_TRAIN</th>
      <th>B_COST</th>
      <th>B_TIME</th>
      <th>W_OTHER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.010295</td>
      <td>0.008356</td>
      <td>0.001083</td>
      <td>-0.018769</td>
      <td>-0.001150</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>0.008356</td>
      <td>0.015392</td>
      <td>-0.001147</td>
      <td>-0.017526</td>
      <td>0.006384</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>0.001083</td>
      <td>-0.001147</td>
      <td>0.029295</td>
      <td>0.014484</td>
      <td>-0.000933</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-0.018770</td>
      <td>-0.017526</td>
      <td>0.014483</td>
      <td>0.117864</td>
      <td>0.047962</td>
    </tr>
    <tr>
      <th>W_OTHER</th>
      <td>-0.001150</td>
      <td>0.006384</td>
      <td>-0.000933</td>
      <td>0.047962</td>
      <td>0.053560</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;# Utility Functions&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;## Class 1&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;### Formulae&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m1</span><span class="o">.</span><span class="n">utility_functions</span><span class="p">(</span><span class="n">resolve_parameters</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;### Final Estimated Values&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m1</span><span class="o">.</span><span class="n">utility_functions</span><span class="p">(</span><span class="n">resolve_parameters</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<h1><a class="toc" name="rx6" reftxt="Utility Functions" toclevel="1"></a>Utility Functions</h1><h2><a class="toc" name="rx7" reftxt="Class 1" toclevel="2"></a>Class 1</h2><h3><a class="toc" name="rx8" reftxt="Formulae" toclevel="3"></a>Formulae</h3><div><table class="floatinghead" style="margin-top:1px;"><thead><tr><th>alt</th><th style="text-align:left;">formula</th></tr></thead><tbody><tr><td>1</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.ASC_TRAIN<span class="tooltiptext">-0.398</span></div><br> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.TRAIN_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>2</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.SM_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>3</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.ASC_CAR<span class="tooltiptext">0.125</span></div><br> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.CAR_CO_SCALED<span class="tooltiptext">This is Data</span></div></td></tr></tbody></table></div><h3><a class="toc" name="rx9" reftxt="Final Estimated Values" toclevel="3"></a>Final Estimated Values</h3><div><table class="floatinghead" style="margin-top:1px;"><thead><tr><th>alt</th><th style="text-align:left;">formula</th></tr></thead><tbody><tr><td>1</td><td style="text-align:left;"><div></div> + <div class="tooltipped">-0.398<span class="tooltiptext">P.ASC_TRAIN</span></div><br> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.TRAIN_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>2</td><td style="text-align:left;"><div></div> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.SM_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>3</td><td style="text-align:left;"><div></div> + <div class="tooltipped">0.125<span class="tooltiptext">P.ASC_CAR</span></div><br> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.CAR_CO_SCALED<span class="tooltiptext">This is Data</span></div></td></tr></tbody></table></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;## Class 2&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;### Formulae&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m1</span><span class="o">.</span><span class="n">utility_functions</span><span class="p">(</span><span class="n">resolve_parameters</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;### Final Estimated Values&quot;</span>
<span class="n">report</span> <span class="o">&lt;&lt;</span> <span class="n">m1</span><span class="o">.</span><span class="n">utility_functions</span><span class="p">(</span><span class="n">resolve_parameters</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<h2><a class="toc" name="rx10" reftxt="Class 2" toclevel="2"></a>Class 2</h2><h3><a class="toc" name="rx11" reftxt="Formulae" toclevel="3"></a>Formulae</h3><div><table class="floatinghead" style="margin-top:1px;"><thead><tr><th>alt</th><th style="text-align:left;">formula</th></tr></thead><tbody><tr><td>1</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.ASC_TRAIN<span class="tooltiptext">-0.398</span></div><br> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.TRAIN_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>2</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.SM_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>3</td><td style="text-align:left;"><div></div> + <div class="tooltipped">P.ASC_CAR<span class="tooltiptext">0.125</span></div><br> + <div class="tooltipped">P.B_COST<span class="tooltiptext">-1.26</span></div> * <div class="tooltipped">X.CAR_CO_SCALED<span class="tooltiptext">This is Data</span></div></td></tr></tbody></table></div><h3><a class="toc" name="rx12" reftxt="Final Estimated Values" toclevel="3"></a>Final Estimated Values</h3><div><table class="floatinghead" style="margin-top:1px;"><thead><tr><th>alt</th><th style="text-align:left;">formula</th></tr></thead><tbody><tr><td>1</td><td style="text-align:left;"><div></div> + <div class="tooltipped">-0.398<span class="tooltiptext">P.ASC_TRAIN</span></div><br> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.TRAIN_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>2</td><td style="text-align:left;"><div></div> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.SM_COST_SCALED<span class="tooltiptext">This is Data</span></div></td></tr><tr><td>3</td><td style="text-align:left;"><div></div> + <div class="tooltipped">0.125<span class="tooltiptext">P.ASC_CAR</span></div><br> + <div class="tooltipped">-1.26<span class="tooltiptext">P.B_COST</span></div> * <div class="tooltipped">X.CAR_CO_SCALED<span class="tooltiptext">This is Data</span></div></td></tr></tbody></table></div></div>
</div>
<p>In addition to reviewing report sections in a Jupyter notebook, the entire report can be saved to an HTML file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;latent-class-example-report.html&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&#39;latent-class-example-report.html&#39;
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="109_nl.html" class="btn btn-neutral float-right" title="109: Swissmetro Nested Logit Mode Choice" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="102_mnl_weighted.html" class="btn btn-neutral float-left" title="102: Swissmetro Weighted MNL Mode Choice" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2019, Jeffrey Newman
      <span class="lastupdated">
        Last updated on Jul 12, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>