

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Model &mdash; Larch 5.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/larch_favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/larch_rtfd.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mathematics of Logit Choice Modeling" href="math.html" />
    <link rel="prev" title="DataService" href="dataservice.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Larch
          

          
          </a>

          
            
            
              <div class="version">
                5.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#utility-function-definition">Utility Function Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameter-manipulation">Parameter Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scikit-learn-interface">Scikit-Learn Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reporting-and-outputs">Reporting and Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization-tools">Visualization Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="math.html">Mathematics of Logit Choice Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine-learning/index.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="example/examples.html">Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Larch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="model">
<h1>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h1>
<p>A <a class="reference internal" href="#larch.Model" title="larch.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></a> is the core object used to represent a discrete choice model.</p>
<dl class="class">
<dt id="larch.Model">
<em class="property">class </em><code class="descclassname">larch.</code><code class="descname">Model</code><span class="sig-paren">(</span><em>utility_ca=None</em>, <em>utility_co=None</em>, <em>quantity_ca=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>A discrete choice model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parameters</strong> (<em>Sequence</em><em>, </em><em>optional</em>) – The names of parameters used in this model.  It is generally not
necessary to define parameter names at initialization, as the names
can (and will) be collected from the utility function and nesting
components later.</li>
<li><strong>utility_ca</strong> (<em>LinearFunction_C</em><em>, </em><em>optional</em>) – The utility_ca function, which represents the qualitative portion of
utility for attributes that vary by alternative.</li>
<li><strong>utility_co</strong> (<em>DictOfLinearFunction</em><em>, </em><em>optional</em>) – The utility_co function, which represents the qualitative portion of
utility for attributes that vary by decision maker but not by alternative.</li>
<li><strong>quantity_ca</strong> (<em>LinearFunction_C</em><em>, </em><em>optional</em>) – The quantity_ca function, which represents the quantitative portion of
utility for attributes that vary by alternative.</li>
<li><strong>quantity_scale</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the parameter used to scale the quantitative portion of
utility.</li>
<li><strong>graph</strong> (<em>NestingTree</em><em>, </em><em>optional</em>) – The nesting tree for this choice model.</li>
<li><strong>dataservice</strong> (<a class="reference internal" href="dataservice.html#larch.DataService" title="larch.DataService"><em>DataService</em></a><em>, </em><em>optional</em>) – An object that can act as a DataService to generate the data needed for
this model.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="utility-function-definition">
<h2>Utility Function Definition<a class="headerlink" href="#utility-function-definition" title="Permalink to this headline">¶</a></h2>
<p>Note that these function definitions act like <em>properties</em> of
the Model object, instead of methods on Model objects.</p>
<dl class="attribute">
<dt id="larch.Model.utility_ca">
<code class="descclassname">Model.</code><code class="descname">utility_ca</code><a class="headerlink" href="#larch.Model.utility_ca" title="Permalink to this definition">¶</a></dt>
<dd><p>The portion of the utility function computed from idca data.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">larch</span> <span class="k">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">X</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">utility_ca</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Param1</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">Data1</span> <span class="o">+</span> <span class="n">P</span><span class="o">.</span><span class="n">Param2</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">Data2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">utility_ca</span><span class="p">)</span>
<span class="go">P.Param1 * X.Data1 + P.Param2 * X.Data2</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">LinearFunction_C</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="larch.Model.utility_co">
<code class="descclassname">Model.</code><code class="descname">utility_co</code><a class="headerlink" href="#larch.Model.utility_co" title="Permalink to this definition">¶</a></dt>
<dd><p>The portion of the utility function computed from idco data.</p>
<p>The keys of this mapping are alternative codes for the applicable elemental
alteratives, and the values are linear functions to compute for the indicated
alternative.  Each alternative that has any idco utility components must have
a unique linear function given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">DictOfLinearFunction_C</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="larch.Model.quantity_ca">
<code class="descclassname">Model.</code><code class="descname">quantity_ca</code><a class="headerlink" href="#larch.Model.quantity_ca" title="Permalink to this definition">¶</a></dt>
<dd><p>The portion of the quantity function computed from idca data.</p>
<p>Note that for the quantity function, the actual computed linear function
uses the exponential of the parameter value(s), not the raw values. Thus,
if the quantity function is given as <cite>P.Param1 * X.Data1 + P.Param2 * X.Data2</cite>,
the computed values will actually be <cite>exp(P.Param1) * X.Data1 + exp(P.Param2) * X.Data2</cite>.
This transformation ensures that the outcome from the quantity function is
always positive, so long as at all of the data terms in the function are
positive.  The <cite>LinearFunction_C</cite> class itself is not intrinsically aware
of this implementation detail, but the <cite>Model.utility_functions()</cite> method is,
and will render the complete utility function in a mathematically correct form.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">larch</span> <span class="k">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">X</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">quantity_ca</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Param1</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">Data1</span> <span class="o">+</span> <span class="n">P</span><span class="o">.</span><span class="n">Param2</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">Data2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">quantity_ca</span><span class="p">)</span>
<span class="go">P.Param1 * X.Data1 + P.Param2 * X.Data2</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">LinearFunction_C</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="parameter-manipulation">
<h2>Parameter Manipulation<a class="headerlink" href="#parameter-manipulation" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="larch.Model.set_value">
<code class="descclassname">Model.</code><code class="descname">set_value</code><span class="sig-paren">(</span><em>self</em>, <em>name</em>, <em>value=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.set_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value for a model parameter.</p>
<p>This function will set the current value of a parameter.
Unless explicitly instructed with an alternate value,
the new value will also be saved as the “initial” value
of the parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the parameter to set to a fixed value.</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The numerical value to set for the parameter.</li>
<li><strong>initvalue</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – If given, this value is used to indicate the initial value
for the parameter, which may be different from the
current value.</li>
<li><strong>nullvalue</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – If given, this will overwrite any existing null value for
the parameter.  If not given, the null value for the
parameter is not changed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.lock_value">
<code class="descclassname">Model.</code><code class="descname">lock_value</code><span class="sig-paren">(</span><em>self</em>, <em>name</em>, <em>value</em>, <em>note=None</em>, <em>change_check=True</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.lock_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a fixed value for a model parameter.</p>
<p>Parameters with a fixed value (i.e., with “holdfast” set to 1)
will not be changed during estimation by the likelihood
maximization algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the parameter to set to a fixed value.</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The numerical value to set for the parameter.</li>
<li><strong>note</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – A note as to why this parameter is set to a fixed value.
This will not affect the mathematical treatment of the
parameter in any way, but may be useful for reporting.</li>
<li><strong>change_check</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>default True</em>) – Whether to trigger a check to see if any parameter frame
values have changed.  Can be set to false to skip this
check if you know that the values have not changed or want
to delay this check for later, but this may result in
problems if the check is needed but not triggered before
certain other modeling tasks are performed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="scikit-learn-interface">
<h2>Scikit-Learn Interface<a class="headerlink" href="#scikit-learn-interface" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="larch.Model.fit">
<code class="descclassname">Model.</code><code class="descname">fit</code><span class="sig-paren">(</span><em>X</em>, <em>y</em>, <em>sample_weight=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the parameters of this model from the training set (X, y).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>X</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.3)"><em>pandas.DataFrame</em></a>) – This DataFrame can be in idca, idce, or idco formats.
If given in idce format, this is a DataFrame with <em>n_casealts</em> rows, and
a two-level MultiIndex.</li>
<li><strong>y</strong> (<em>array-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The target choice values.  If given as a <code class="docutils literal notranslate"><span class="pre">str</span></code>, use that named column of <cite>X</cite>.</li>
<li><strong>sample_weight</strong> (<em>array-like</em><em>, </em><em>shape =</em><em> [</em><em>n_cases</em><em>] or </em><em>[</em><em>n_casealts</em><em>]</em><em>, or </em><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – Sample weights. If None, then samples are equally weighted. If shape is <em>n_casealts</em>,
the array is collapsed to <em>n_cases</em> by taking only the first weight in each case.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>self</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#larch.Model" title="larch.Model">Model</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.predict">
<code class="descclassname">Model.</code><code class="descname">predict</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict choices for X.</p>
<p>This method returns the index of the maximum probability choice, not the probability.
To recover the probability, which is probably what you want (pun intended), see
<a class="reference internal" href="#larch.Model.predict_proba" title="larch.Model.predict_proba"><code class="xref py py-meth docutils literal notranslate"><span class="pre">predict_proba()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>X</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.3)"><em>pandas.DataFrame</em></a>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>y</strong> – The predicted choices.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">array of shape = [n_cases]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.predict_proba">
<code class="descclassname">Model.</code><code class="descname">predict_proba</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.predict_proba" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict probability for X.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>X</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.3)"><em>pandas.DataFrame</em></a>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>y</strong> – The predicted probabilities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">array of shape = [n_cases, n_alts]</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="reporting-and-outputs">
<h2>Reporting and Outputs<a class="headerlink" href="#reporting-and-outputs" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="larch.Model.parameter_summary">
<code class="descclassname">Model.</code><code class="descname">parameter_summary</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.parameter_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an XHTML summary of parameter values.</p>
<p>This will generate a small table of parameters statistics,
containing:</p>
<ul class="simple">
<li>Parameter Name (and Category, if applicable)</li>
<li>Estimated Value</li>
<li>Standard Error of the Estimate (if known)</li>
<li>t Statistic (if known)</li>
<li>Null Value</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">xmle.Elem</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.utility_functions">
<code class="descclassname">Model.</code><code class="descname">utility_functions</code><span class="sig-paren">(</span><em>subset=None</em>, <em>resolve_parameters=False</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.utility_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an XHTML output of the utility function(s).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subset</strong> (<em>Collection</em><em>, </em><em>optional</em>) – A collection of alternative codes to include. This only has effect if
there are separate utility_co functions set by alternative. It is
recommended to use this parameter if there are a very large number of
alternatives, and the utility functions of most (or all) of them
can be effectively communicated by showing only a few.</li>
<li><strong>resolve_parameters</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>default False</em>) – Whether to resolve the parameters to the current (estimated) value
in the output.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">xmle.Elem</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.estimation_statistics">
<code class="descclassname">Model.</code><code class="descname">estimation_statistics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.estimation_statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an XHTML summary of estimation statistics.</p>
<p>This will generate a small table of estimation statistics,
containing:</p>
<ul class="simple">
<li>Log Likelihood at Convergence</li>
<li>Log Likelihood at Null Parameters (if known)</li>
<li>Log Likelihood with No Model (if known)</li>
<li>Log Likelihood at Constants Only (if known)</li>
</ul>
<p>Additionally, for each included reference value (i.e.
everything except log likelihood at convergence) the
rho squared with respect to that value is also given.</p>
<p>Each statistic is reported in aggregate, as well as
per case.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>compute_loglike_null</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>default True</em>) – If the log likelihood at null values has not already
been computed (i.e., if it is not cached) then compute
it, cache its value, and include it in the output.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">xmle.Elem</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="visualization-tools">
<h2>Visualization Tools<a class="headerlink" href="#visualization-tools" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="larch.Model.distribution_on_idca_variable">
<code class="descclassname">Model.</code><code class="descname">distribution_on_idca_variable</code><span class="sig-paren">(</span><em>x</em>, <em>xlabel=None</em>, <em>ylabel='Relative Frequency'</em>, <em>style='hist'</em>, <em>bins=None</em>, <em>pct_bins=20</em>, <em>range=None</em>, <em>prob_label='Modeled'</em>, <em>obs_label='Observed'</em>, <em>subselector=None</em>, <em>probability=None</em>, <em>bw_method=None</em>, <em>discrete=None</em>, <em>ax=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.distribution_on_idca_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a figure of observed and modeled choices over a range of variable values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> (<a class="reference internal" href="#larch.Model" title="larch.Model"><em>Model</em></a>) – The discrete choice model to analyze.</li>
<li><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>array-like</em>) – The name of an <cite>idca</cite> variable, or an array giving its values.  If this name exactly
matches that of an <cite>idca</cite> column in the model’s loaded <cite>dataframes</cite>, then
those values are used, otherwise the variable is loaded from the model’s
<cite>dataservice</cite>.</li>
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – A label to use for the x-axis of the resulting figure.  If not given,
the value of <cite>x</cite> is used if it is a string.  Set to <cite>False</cite> to omit the
x-axis label.</li>
<li><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>default &quot;Relative Frequency&quot;</em>) – A label to use for the y-axis of the resulting figure.</li>
<li><strong>style</strong> (<em>{'hist'</em><em>, </em><em>'kde'}</em>) – The style of figure to produce, either a histogram or a kernel density plot.</li>
<li><strong>bins</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><em>default 25</em>) – The number of bins to use, only applicable to histogram style.</li>
<li><strong>range</strong> (<em>2-tuple</em><em>, </em><em>optional</em>) – A range to truncate the figure.</li>
<li><strong>prob_label</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>default &quot;Modeled&quot;</em>) – A label to put in the legend for the modeled probabilities</li>
<li><strong>obs_label</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>default &quot;Observed&quot;</em>) – A label to put in the legend for the observed choices</li>
<li><strong>subselector</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – A filter to apply to cases. If given as a string, this is loaded from the
model’s <cite>dataservice</cite> as an <cite>idco</cite> variable.</li>
<li><strong>probability</strong> (<em>array-like</em><em>, </em><em>optional</em>) – The pre-calculated probability array for all cases in this analysis.
If not given, the probability array is calculated at the current parameter
values.</li>
<li><strong>ax</strong> (<em>matplotlib.Axes</em><em>, </em><em>optional</em>) – If given, the figure will be drawn on these axes and they will be returned,
otherwise new blank axes are used to draw the figure and a rendering is returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first"><strong>header</strong> (<em>str, optional</em>) – A header to attach to the figure.  The header is not generated using
matplotlib, but instead is prepended to the xml output with a header tag before the
rendered svg figure.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns <cite>ax</cite> if given as an argument, otherwise returns a rendering as an Elem</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Elem or Axes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="larch.Model.distribution_on_idco_variable">
<code class="descclassname">Model.</code><code class="descname">distribution_on_idco_variable</code><span class="sig-paren">(</span><em>x</em>, <em>xlabel</em>, <em>bins=None</em>, <em>pct_bins=20</em>, <em>figsize=(12</em>, <em>4)</em>, <em>style='stacked'</em>, <em>discrete=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#larch.Model.distribution_on_idco_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a figure of variables over a range of variable values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> (<a class="reference internal" href="#larch.Model" title="larch.Model"><em>Model</em></a>) – The discrete choice model to analyze.</li>
<li><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>array-like</em>) – The name of an <cite>idco</cite> variable, or an array giving its values.  If this name exactly
matches that of an <cite>idco</cite> column in the model’s loaded <cite>dataframes</cite>, then
those values are used, otherwise the variable is loaded from the model’s
<cite>dataservice</cite>.</li>
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – A label to use for the x-axis of the resulting figure.  If not given,
the value of <cite>x</cite> is used if it is a string.  Set to <cite>False</cite> to omit the
x-axis label.</li>
<li><strong>bins</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><em>optional</em>) – The number of equal-sized bins to use.</li>
<li><strong>pct_bins</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><em>array-like</em><em>, </em><em>default 20</em>) – The number of equal-mass bins to use.</li>
<li><strong>style</strong> (<em>{'stacked'</em><em>, </em><em>'dataframe'</em><em>, </em><em>'many'}</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Elem</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="math.html" class="btn btn-neutral float-right" title="Mathematics of Logit Choice Modeling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dataservice.html" class="btn btn-neutral float-left" title="DataService" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2019, Jeffrey Newman
      <span class="lastupdated">
        Last updated on Nov 25, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>